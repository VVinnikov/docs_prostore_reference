---
layout: default
title: CREATE UPLOAD EXTERNAL TABLE
nav_order: 13
parent: Запросы SQL+
grand_parent: Справочная информация
has_children: false
has_toc: false
---

# CREATE UPLOAD EXTERNAL TABLE

Запрос позволяет создать [внешнюю таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) 
загрузки в [логической базе данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md).

В ответе возвращается:
*   пустой объект ResultSet при успешном выполнении запроса;
*   исключение при неуспешном выполнении запроса.

После успешного выполнения запроса можно выполнять запросы 
[INSERT INTO logical_table](../INSERT_INTO_logical_table/INSERT_INTO_logical_table.md) на загрузку данных. Подробнее о порядке 
выполнения действий для загрузки данных см. в разделе 
[Загрузка данных](../../../Работа_с_системой/Загрузка_данных/Загрузка_данных.md).

**Примечание:** изменение внешней таблицы недоступно. Для замены некорректной внешней таблицы необходимо 
удалить ее и создать новую.

## Синтаксис

```sql
CREATE UPLOAD EXTERNAL TABLE [db_name.]ext_table_name (
  column_name_1 datatype_1,
  column_name_2 datatype_2,
  column_name_3 datatype_3
)
LOCATION source_URI
FORMAT 'AVRO'
[MESSAGE_LIMIT messages_per_segment]
```

## Параметры

*   `db_name` — имя логической базы данных, в которой создается внешняя таблица. Указание опционально, 
    если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md);
*   `ext_table_name` — имя создаваемой внешней таблицы загрузки. Для удобства различения таблиц выгрузки 
    и таблиц загрузки рекомендуется задавать имя таблицы, указывающее на ее тип, например 
    `sales_ext_upload`;
*   `column_name_N` — имя столбца таблицы;
*   `datatype_N` — тип данных столбца `column_name_N`. Возможные значения см. в разделе 
    [Логические типы данных](../../Поддерживаемые_типы_данных/Логические_типы_данных/Логические_типы_данных.md);
*   `source_URI` — путь к топику Kafka 
    (см. [Формат пути к внешнему приемнику данных](../../Формат_пути_к_внешнему_приемнику_данных/Формат_пути_к_внешнему_приемнику_данных.md));
*   `messages_per_segment` — максимальное количество сообщений, загружаемых 
    в [хранилище](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md) 
    в составе одного блока на один поток загрузки. Значение подбирается в зависимости от параметров 
    производительности инфраструктуры.
    
## Пример

```sql
CREATE UPLOAD EXTERNAL TABLE sales.sales_ext_upload (
  identification_number INT,
  transaction_date TIMESTAMP,
  product_code VARCHAR(256),
  product_units INT,
  store_id INT,
  description VARCHAR(256)
)
LOCATION  'kafka://zk1:2181,zk2:2181,zk3:2181/sales'
FORMAT 'AVRO'
MESSAGE_LIMIT 1000
```