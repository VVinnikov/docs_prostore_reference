{"0": {
    "doc": "ALTER VIEW",
    "title": "ALTER VIEW",
    "content": "# ALTER VIEW Запрос позволяет изменить вид [логического представления](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md) в [логической базе данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md). В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. **Примечание:** логическое представление можно также изменить с помощью запроса `CREATE OR REPLACE VIEW` (см. [CREATE VIEW](../CREATE_VIEW/CREATE_VIEW.md)). ## Синтаксис ```sql ALTER VIEW [db_name.]view_name AS SELECT query ``` ## Параметры * `db_name` — имя логической базы данных, в которой находится логическое представление. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `view_name` — имя изменяемого логического представления; * `query` — [SELECT](../SELECT/SELECT.md)\\-подзапрос, на основе которого строится новый вид логического представления. ## Ограничения В подзапросе `query` не допускается использование: * логических представлений, * [системных представлений](../../Системные_представления_INFORMATION_SCHEMA/Системные_представления_INFORMATION_SCHEMA.md) INFORMATION_SCHEMA, * директивы [FOR SYSTEM_TIME](../SELECT/SELECT.md#sect_for_system_time), * секции [DATASOURCE_TYPE](../SELECT/SELECT.md#param_datasource_type). ## Пример ```sql ALTER VIEW sales.stores_by_sold_products AS SELECT store_id, SUM(product_units) AS product_amount FROM sales.sales GROUP BY store_id ORDER BY product_amount ASC LIMIT 20 ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/ALTER_VIEW/ALTER_VIEW.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/ALTER_VIEW/ALTER_VIEW.html"
  },"1": {
    "doc": "BEGIN DELTA",
    "title": "BEGIN DELTA",
    "content": "# BEGIN DELTA Запрос позволяет открыть новую горячую [дельту](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md) для последующей загрузки данных. Номер открываемой дельты может быть указан в запросе или установлен системой. **Примечание:** перед выполнением запроса необходимо определить логическую базу данных, [используемую по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md), если она еще не определена. В ответе возвращается: * объект ResultSet c одной записью, содержащей информацию о номере открытой дельты, при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. При успешном выполнении запроса открывается новая дельта. Дельта получает номер, указанный в запросе (если номер указан и корректен) или определенный системой (если номер не указан). Дельта всегда открывается с номером, следующим по порядку за номером последней закрытой дельты. После успешного выполнения запроса можно выполнять запросы [INSERT INTO logical_table](../INSERT_INTO_logical_table/INSERT_INTO_logical_table.md) на загрузку данных. Подробнее о порядке выполнения запросов для загрузки данных см. в разделе [Загрузка данных](../../../Работа_с_системой/Загрузка_данных/Загрузка_данных.md). Если нужно отменить все изменения данных, загруженные в рамках открытой дельты, выполните запрос [ROLLBACK DELTA](../ROLLBACK_DELTA/ROLLBACK_DELTA.md). ## Синтаксис Открытие новой дельты: ```sql BEGIN DELTA ``` Открытие новой дельты с указанным номером: ```sql BEGIN DELTA SET delta_number ``` ## Параметры * `delta_number` — целочисленный номер открываемой дельты, равный номеру последней закрытой дельты + 1. Номер последней закрытой дельты можно узнать с помощью запроса [GET_DELTA_OK](../GET_DELTA_OK/GET_DELTA_OK.md). ## Ограничения Если в запросе указан номер открываемой дельты, он должен быть равен номеру последней закрытой дельты + 1. ## Пример ```sql BEGIN DELTA SET 10 ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/BEGIN_DELTA/BEGIN_DELTA.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/BEGIN_DELTA/BEGIN_DELTA.html"
  },"2": {
    "doc": "CHECK_DATA",
    "title": "CHECK_DATA",
    "content": "# CHECK_DATA Запрос позволяет проверить идентичность данных [логической таблицы](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md), загруженных в различные [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md) в указанный период. Проверка выполняется по всем [операциям записи](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Операция_записи/Операция_записи.md), начиная с [дельты](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md), указанной в запросе, и заканчивая последней закрытой дельтой. Граничные дельты включаются в проверку. Алгоритм проверки зависит от параметров запроса: * если в запросе указаны столбцы к проверке, по каждой операции записи вычисляется хэш значений этих столбцов и полученные значения сравниваются в целевых СУБД хранилища; * если столбцы не указаны, сравнивается количество записей, загруженных в рамках каждой операции записи, в каждую из целевых СУБД хранилища. **Примечание:** в проверке участвуют целевые СУБД хранилища — те СУБД, в которых размещены данные проверяемой логической таблицы. Если такая СУБД одна, проверка все равно выполняется и считается успешной (см. рисунок [ниже](#img_check_for_one_db)). В ответе возвращается: * объект ResultSet с одной записью, содержащей результаты проверки, при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. Возвращаемая информация включает сообщение об успешной проверке или найденных расхождениях, а также список проверенных СУБД хранилища. На рисунке ниже показан пример ответа в случае расхождения: хэш в ADB отличается от хэша в ADG и ADQM. Различия вызваны тем, что запись была удалена напрямую из ADB (за рамками системы), а записи в ADG и ADQM остались без изменений. ![](check_data_с_расхождениями.png) {: .figure-center} *Ответ CHECK_DATA с найденными расхождениями* {: .figure-caption-center} На рисунке ниже показан пример ответа в случае успешной проверки логической таблицы, данные которой размещены только в ADB. ![](check_data_без_расхождений.png){:height=\"50%\" width=\"50%\"} {: .figure-center} *Ответ CHECK_DATA с проверкой только в ADB* {: .figure-caption-center} ## Синтаксис ```sql CHECK_DATA([db_name.]table_name, delta_number[, square-bracketed_column_list]) ``` ## Параметры * `db_name` — имя логической базы данных, в которой находится проверяемая логическая таблица. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `table_name` — имя проверяемой логической таблицы; * `delta_number` — номер дельты, с которой начинается проверка. Должен быть меньше или равен номеру последней закрытой дельты. Номер последней закрытой дельты можно узнать с помощью запроса [GET_DELTA_OK](../../../Справочная_информация/Запросы_SQLplus/GET_DELTA_OK/GET_DELTA_OK.md); * `square_bracketed_column_list` — список проверяемых столбцов таблицы. Элементы списка должны быть указаны в квадратных скобках через запятую, например `[identification_number, transaction_date]`. Если столбцы не указаны, проверка выполняется по количеству записей, загруженных в рамках каждой операции записи в каждую целевую СУБД хранилища. ## Ограничения Нет строгой гарантии отсутствия ложноположительных результатов. ## Примеры Проверка целостности данных логической таблицы `sales` в диапазоне \\[дельта 4, последняя закрытая дельта\\]: ```sql CHECK_DATA(sales.sales, 4) ``` Проверка целостности данных столбцов `identification_number` и `transaction_date` логической таблицы `sales`: ```sql CHECK_DATA(sales.sales, 4, [identification_number, transaction_date]) CHECK_DATA(sales.sales, 4) ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CHECK_DATA/CHECK_DATA.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CHECK_DATA/CHECK_DATA.html"
  },"3": {
    "doc": "CHECK_DATABASE",
    "title": "CHECK_DATABASE",
    "content": "# CHECK_DATABASE Запрос позволяет проверить соответствие [логических таблиц](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) [логической базы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) и их физических представлений — [физических таблиц](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Физическая_таблица/Физическая_таблица.md) в [хранилище данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md). В проверке участвуют логические таблицы логической базы данных и все связанные с ними физические таблицы. Если СУБД хранилища не хранит данные логической таблицы, и, следовательно, не содержит связанные физические таблицы, она пропускается при проверке логической таблицы. Проверяется соответствие следующих элементов: * имен и порядка следования столбцов, * типов данных столбцов, * первичного ключа. Имена и порядок следования проверяются для всех столбцов логических и физических таблиц, включая служебные столбцы, имеющиеся только у физических таблиц. Например, если служебный столбец `sys_to` удален из физической таблицы, в ответе вернется сообщение о расхождении. В ответе возвращается: * объект ResultSet с одной записью, содержащей результаты проверки, при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. Возвращаемая информация включает сообщение об успешной проверке или найденных расхождениях, а также список проверенных СУБД хранилища. На рисунках ниже показаны примеры ответов: на первом — ответ при отсутствии расхождений, на втором — при наличии расхождений. Расхождения вызваны тем, что в целях иллюстрации между первым и вторым запросом столбец `description` был переименован в ADB. ![](check_database_без_расхождений.png){:height=\"50%\" width=\"50%\"} {: .figure-center} *Ответ CHECK_DATABASE при успешной проверке* {: .figure-caption-center} ![](check_database_с_расхождениями.png) {: .figure-center} *Ответ CHECK_DATABASE с найденными расхождениями* {: .figure-caption-center} ## Синтаксис Проверка логической базы данных, [выбранной по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md): ```sql CHECK_DATABASE() ``` Проверка указанной логической базы данных: ```sql CHECK_DATABASE(db_name) ``` ## Параметры * `db_name` — имя логической базы данных, для таблиц которой выполняется проверка. ## Пример ```sql CHECK_DATABASE(sales) ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CHECK_DATABASE/CHECK_DATABASE.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CHECK_DATABASE/CHECK_DATABASE.html"
  },"4": {
    "doc": "CHECK_SUM",
    "title": "CHECK_SUM",
    "content": "# CHECK_SUM Запрос позволяет проверить равенство контрольных сумм для указанной [дельты](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md) в различных СУБД хранилища и, тем самым, проверить идентичность данных в этих СУБД. Доступны следующие области проверки: * все [логические таблицы](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) [логической базы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), * все столбцы логической таблицы, * отдельные столбцы логической таблицы. Проверка контрольной суммы данных каждой логической таблицы производится сравнением контрольных сумм, вычисленных по соответствующим данным, содержащимся в каждой из целевых СУБД. Контрольная сумма данных формируется по хеш-функции от символьной контрольной строки для этих данных. Контрольная строка для данных всех логических таблиц формируется конкатенацией контрольных строк для данных каждой таблицы. Контрольная строка для данных таблицы формируется конкатенацией контрольных сумм для данных в столбцах из указанного списка. Контрольные суммы для данных в столбцах сопоставляются между целевыми СУБД. В ответе возвращается: * 64-битное неотрицательное целочисленное значение совпадающих контрольных сумм указанных данных в разных СУБД, при успешном выполнении запроса; * сообщение о несовпадении контрольных сумм указанных данных в разных СУБД при успешном выполнении запроса или сообщение о неуспешном выполнении запроса. ## Синтаксис ```sql CHECK_SUM(delta_num[, [db_name.]table_name[, square-bracketed_column_list]]) ``` ## Параметры * `delta_num` — номер горячей или закрытой [дельты](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md), в рамках которой вычисляется контрольная сумма. Если других аргументов не указано, контрольная сумма вычисляется для данных, хранимых во всех [логических таблицах](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) [логической БД](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), [используемой по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `table_name` — опционально указываемое имя логической таблицы, для данных которой вычисляется контрольная сумма; * `square-bracketed_column_list` — опциональный список имён столбцов указанной логической таблицы, для данных которых вычисляется контрольная сумма. Элементы списка перечисляются внутри квадратных скобок через запятую. Если список столбцов не указан, контрольная сумма вычисляется по всем столбцам логической таблицы. ## Ограничения * Не предоставляется строгой гарантии отсутствия ложноположительных результатов проверки контрольной суммы. ## Примеры Проверка контрольной суммы логической базы данных `sales` в рамках нулевой дельты: ```sql USE sales CHECK_SUM(0) ``` Проверка контрольной суммы столбцов логической таблицы `stores` в рамках нулевой дельты: ```sql CHECK_SUM(0,sales.stores,[region, address]) ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CHECK_SUM/CHECK_SUM.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CHECK_SUM/CHECK_SUM.html"
  },"5": {
    "doc": "CHECK_TABLE",
    "title": "CHECK_TABLE",
    "content": "# CHECK_TABLE Запрос позволяет проверить соответствие [логической таблицы](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) и ее физических представлений — [физических таблиц](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Физическая_таблица/Физическая_таблица.md) в [хранилище данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md). В проверке участвуют указанная логическая таблица и все связанные с ней физические таблицы. Если СУБД хранилища не хранит данные логической таблицы, и, следовательно, не содержит связанные физические таблицы, она пропускается при проверке. Проверяется соответствие следующих элементов: * имен и порядка следования столбцов, * типов данных столбцов, * первичного ключа. Имена и порядок следования проверяются для всех столбцов логической и физических таблиц, включая служебные столбцы, имеющиеся только у физических таблиц. Например, если служебный столбец `sys_to` удален из физической таблицы, в ответе вернется сообщение о расхождении. В ответе возвращается: * объект ResultSet с одной записью, содержащей результаты проверки, при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. Возвращаемая информация включает сообщение об успешной проверке или найденных расхождениях, а также список проверенных СУБД хранилища. На рисунках ниже показаны примеры ответа в случае успешной проверки. В первом примере проверка выполнена для логической таблицы, данные которой размещены во всех СУБД хранилища, во втором — для таблицы, данные которой размещены только в ADB. ![](check_table_без_расхождений_3_бд.png){:height=\"50%\" width=\"50%\"} {: .figure-center} *Ответ CHECK_TABLE при успешной проверке* {: .figure-caption-center} ![](check_table_без_расхождений_1_бд.png){:height=\"50%\" width=\"50%\"} {: .figure-center} *Ответ CHECK_TABLE с проверкой только в ADB* {: .figure-caption-center} На рисунке ниже показан пример ответа при наличии расхождений. Проверка прошла успешно для ADG и ADQM, а в ADB найдено несоответствие — столбец `description` отсутсвует в физической таблице с архивными записями. ![](check_table_с_расхождениями.png) {: .figure-center} *Ответ CHECK_TABLE с найденными расхождениями* {: .figure-caption-center} ## Синтаксис ```sql CHECK_TABLE([db_name.]table_name) ``` ## Параметры * `db_name` — имя логической базы данных, которой принадлежит проверяемая логическая таблица. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `table_name` — имя проверяемой логической таблицы. ## Пример ```sql CHECK_TABLE(sales.stores) ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CHECK_TABLE/CHECK_TABLE.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CHECK_TABLE/CHECK_TABLE.html"
  },"6": {
    "doc": "CHECK_VERSIONS",
    "title": "CHECK_VERSIONS",
    "content": "# CHECK_VERSIONS Запрос позволяет получить информацию о версиях следующих программных компонентов: * [компонентов системы](../../../Обзор_понятий_компонентов_и_связей/Компоненты_системы/Компоненты_системы.md), * компонентов, с которыми работает система. В ответе возвращается: * объект ResultSet с записями, содержащими информацию об именах и версиях компонентах, при успешном выполнении запроса (см. рисунок ниже); * исключение при неуспешном выполнении запроса. ![](check_versions.png) {: .figure-center} *Ответ CHECK_VERSIONS* {: .figure-caption-center} ## Синтаксис ```sql CHECK_VERSIONS() ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CHECK_VERSIONS/CHECK_VERSIONS.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CHECK_VERSIONS/CHECK_VERSIONS.html"
  },"7": {
    "doc": "COMMIT DELTA",
    "title": "COMMIT DELTA",
    "content": "# COMMIT DELTA Запрос позволяет закрыть открытую (горячую) [дельту](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md). Дата и время закрытия дельты могут быть указаны в запросе или установлены системой. Перед выполнением запроса необходимо определить логическую базу данных, [используемую по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md), если она еще не определена. В ответе возвращается: * объект ResultSet c одной записью, содержащей информацию о дате и времени закрытия дельты, при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. При успешном выполнении запроса горячие записи дельты перемещаются в категорию актуальных, а зафиксированные ранее записи, которые больше не являются актуальными, — в категорию архивных. Дельта закрывается и становится недоступна для загрузки данных. Подробнее о порядке обновления записей см. в разделе [Физическая таблица](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Физическая_таблица/Физическая_таблица.md). В качестве даты и времени закрытия дельты устанавливаются дата и время, указанные в запросе (если они указаны и корректны) или определенные системой (если дата и время не указаны). ## Синтаксис Закрытие открытой дельты: ```sql COMMIT DELTA ``` Закрытие открытой дельты с указанными датой и временем закрытия: ```sql COMMIT DELTA SET date_time_expression ``` ## Параметры * `date_time_expression` — метка даты и времени вида `'YYYY-MM-DD HH:MM:SS'`. ## Ограничения Если в запросе указаны дата и время закрытия дельты, они должны быть больше, чем дата и время последней закрытой дельты. Дату и время последней закрытой дельты можно узнать, выполнив запрос [GET_DELTA_OK](../GET_DELTA_OK/GET_DELTA_OK.md). ## Пример ```sql COMMIT DELTA SET '2021-03-21 09:29:54' ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/COMMIT_DELTA/COMMIT_DELTA.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/COMMIT_DELTA/COMMIT_DELTA.html"
  },"8": {
    "doc": "CONFIG_STORAGE_ADD",
    "title": "CONFIG_STORAGE_ADD",
    "content": "# CONFIG_STORAGE_ADD Запрос позволяет подключить к системе источник данных — [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) указанного типа. После успешного выполнения запроса можно [создавать](../CREATE_TABLE/CREATE_TABLE.md) [логические таблицы](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) с размещением данных в этой СУБД и [загружать](../INSERT_INTO_logical_table/INSERT_INTO_logical_table.md) данные в нее. **Примечание:** перед выполнением запроса необходимо добавить параметры СУБД в [конфигурацию](../../../Эксплуатация/Конфигурация/Конфигурация.md) системы. В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. При успешном выполнении запроса все [логические базы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) [окружения](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Окружение/Окружение.md) активируются для указанной СУБД [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md). При этом копирование логических таблиц и их данных из других СУБД хранилища не происходит и не может быть выполнено средствами системы. ## Синтаксис ```sql CONFIG_STORAGE_ADD('datasource_alias') ``` ## Параметры * `datasource_alias` — псевдоним СУБД хранилища. Возможные значения: `adb`, `adqm`, `adg`. ## Пример Подключение ADB к хранилищу: ```sql CONFIG_STORAGE_ADD('adb') ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CONFIG_STORAGE_ADD/CONFIG_STORAGE_ADD.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CONFIG_STORAGE_ADD/CONFIG_STORAGE_ADD.html"
  },"9": {
    "doc": "CREATE DATABASE",
    "title": "CREATE DATABASE",
    "content": "# CREATE DATABASE Запрос позволяет создать [логическую базу данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) в текущем [окружении](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Окружение/Окружение.md). В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. После успешного выполнения запроса можно создавать [логические таблицы](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md), [логические представления](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md) и [внешние таблицы](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) в созданной логической базе данных. **Совет:** перед наполнением созданной логической базы данных [выберите ее в качестве используемой по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md) — это позволит не указывать имя логической БД перед именами логических сущностей в запросах к ней. ## Синтаксис ```sql CREATE DATABASE db_name ``` ## Параметры * `db_name` — имя создаваемой логической базы данных. Может содержать латинские буквы, цифры и символы подчеркивания (“_”). ## Пример ```sql CREATE DATABASE sales ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CREATE_DATABASE/CREATE_DATABASE.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CREATE_DATABASE/CREATE_DATABASE.html"
  },"10": {
    "doc": "CREATE DOWNLOAD EXTERNAL TABLE",
    "title": "CREATE DOWNLOAD EXTERNAL TABLE",
    "content": "# CREATE DOWNLOAD EXTERNAL TABLE Запрос позволяет создать [внешнюю таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) выгрузки в [логической базе данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md). В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. После успешного выполнения запроса можно выполнять запросы [INSERT INTO download_external_table](../INSERT_INTO_download_external_table/INSERT_INTO_download_external_table.md) на выгрузку данных. Подробнее о порядке выполнения действий для выгрузки данных см. в разделе [Выгрузка данных](../../../Работа_с_системой/Выгрузка_данных/Выгрузка_данных.md). **Примечание:** изменение внешней таблицы недоступно. Для замены некорректной внешней таблицы необходимо удалить ее и создать новую. ## Синтаксис ```sql CREATE DOWNLOAD EXTERNAL TABLE [db_name.]ext_table_name( column_name_1 datatype_1, column_name_2 datatype_2, column_name_3 datatype_3 ) LOCATION receiver_URI FORMAT 'AVRO' [CHUNK_SIZE records_per_message] ``` ## Параметры * `db_name` — имя логической базы данных, в которой создается внешняя таблица. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `ext_table_name` — имя создаваемой внешней таблицы выгрузки. Для удобства различения таблиц выгрузки и таблиц загрузки рекомендуется задавать имя таблицы, указывающее на ее тип, например `sales_ext_download`; * `column_name_N` — имя столбца таблицы; * `datatype_N` — тип данных столбца `column_name_N`. Возможные значения см. в разделе [Логические типы данных](../../Поддерживаемые_типы_данных/Логические_типы_данных/Логические_типы_данных.md); * `receiver_URI` — путь к топику Kafka (см. [Формат пути к внешнему приемнику данных](../../Формат_пути_к_внешнему_приемнику_данных/Формат_пути_к_внешнему_приемнику_данных.md)); * `records_per_message` — максимальное количество записей, выгружаемых из хранилища в одном сообщении топика Каfka. ## Пример ```sql CREATE DOWNLOAD EXTERNAL TABLE sales.sales_ext_download ( identification_number INT, transaction_date TIMESTAMP, product_code VARCHAR(256), product_units INT, store_id INT, description VARCHAR(256) ) LOCATION 'kafka://zk1:2181,zk2:2181,zk3:2181/sales_out' FORMAT 'AVRO' CHUNK_SIZE 1000 ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CREATE_DOWNLOAD_EXTERNAL_TABLE/CREATE_DOWNLOAD_EXTERNAL_TABLE.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CREATE_DOWNLOAD_EXTERNAL_TABLE/CREATE_DOWNLOAD_EXTERNAL_TABLE.html"
  },"11": {
    "doc": "CREATE TABLE",
    "title": "CREATE TABLE",
    "content": "# CREATE TABLE Запрос позволяет создать [логическую таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) в [логической базе данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md). В зависимости от параметров запроса данные логической таблицы размещаются в указанных или всех [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md). Рекомендуется создавать логическую таблицу с размещением данных, как минимум, в СУБД, которая выбрана для выгрузки данных в [конфигурации](../../../Эксплуатация/Конфигурация/Конфигурация.md) системы. Данные могут размещаться в любых СУБД хранилища, однако, если они размещаются вне СУБД выгрузки, их выгрузка недоступна. В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. При успешном выполнении запроса появляется новая таблица в [логической схеме данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md). Соответствующие [физические таблицы](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Физическая_таблица/Физическая_таблица.md) появляются в СУБД хранилища, указанных в запросе, или, если СУБД не указаны в запросе, — во всех СУБД хранилища. **Примечание:** изменение логической таблицы недоступно. Для замены некорректной таблицы необходимо удалить ее и создать новую. ## Синтаксис ```sql CREATE TABLE [db_name.]table_name ( column_name_1 datatype_1 NOT NULL, column_name_2 datatype_2 DEFAULT default_value_2, column_name_3 datatype_3, PRIMARY KEY (column_list_1) ) DISTRIBUTED BY (column_list_2) DATASOURCE_TYPE (datasource_aliases) ``` ## Параметры * `db_name` — имя логической базы данных, в которой создается логическая таблица. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `table_name` — имя создаваемой логической таблицы, уникальное среди логических сущностей логической БД; * `column_name_N` — имя столбца таблицы; * `datatype_N` — тип данных столбца `column_name_N`. Возможные значения см. в разделе [Логические типы данных](../../Поддерживаемые_типы_данных/Логические_типы_данных/Логические_типы_данных.md); * `default_value_N` — значение столбца `column_name_N` по умолчанию; * `column_list_1` — список столбцов, входящих в первичный ключ таблицы; * `column_list_2` — список столбцов целочисленного типа, входящих в ключ шардирования таблицы. Столбцы должны быть из числа столбцов `column_list_1`; * `datasource_aliases` — список псевдонимов СУБД хранилища, в которых нужно разместить данные таблицы. Элементы списка перечисляются через запятую. Возможные значения: `adb`, `adqm`, `adg`. ## Ограничения * Имена столбцов должны быть уникальны в рамках логической таблицы. * Недопустимо использование зарезервированных имен столбцов: `sys_op`, `sys_from`, `sys_to`, `sys_close_date`, `bucket_id`, `sign`. * Первичный ключ должен включать все столбцы ключа шардирования. * Ключ шардирования может содержать только целочисленные столбцы. ## Примеры Создание логической таблицы с размещением данных во всех СУБД хранилища: ```sql CREATE TABLE sales.sales ( identification_number INT NOT NULL, transaction_date TIMESTAMP NOT NULL, product_code VARCHAR(256) NOT NULL, product_units INT NOT NULL, store_id INT NOT NULL, description VARCHAR(256), PRIMARY KEY (identification_number) ) DISTRIBUTED BY (identification_number) ``` Создание логической таблицы с составным первичным ключом и размещением данных во всех СУБД хранилища: ```sql CREATE TABLE sales.stores ( identification_number INT NOT NULL, category VARCHAR(256) NOT NULL, region VARCHAR(256) NOT NULL, address VARCHAR(256) NOT NULL, description VARCHAR(256), PRIMARY KEY (identification_number, region) ) DISTRIBUTED BY (identification_number) ``` Создание логической таблицы с размещением данных в ADQM и ADG (без размещения в ADB): ```sql CREATE TABLE sales.clients ( identification_number INT NOT NULL, first_name VARCHAR(256) NOT NULL, last_name VARCHAR(256) NOT NULL, patronymic_name VARCHAR(256), birth_date DATE, PRIMARY KEY (identification_number) ) DISTRIBUTED BY (identification_number) DATASOURCE_TYPE (adqm,adg) ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CREATE_TABLE/CREATE_TABLE.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CREATE_TABLE/CREATE_TABLE.html"
  },"12": {
    "doc": "CREATE UPLOAD EXTERNAL TABLE",
    "title": "CREATE UPLOAD EXTERNAL TABLE",
    "content": "# CREATE UPLOAD EXTERNAL TABLE Запрос позволяет создать [внешнюю таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) загрузки в [логической базе данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md). В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. После успешного выполнения запроса можно выполнять запросы [INSERT INTO logical_table](../INSERT_INTO_logical_table/INSERT_INTO_logical_table.md) на загрузку данных. Подробнее о порядке выполнения действий для загрузки данных см. в разделе [Загрузка данных](../../../Работа_с_системой/Загрузка_данных/Загрузка_данных.md). **Примечание:** изменение внешней таблицы недоступно. Для замены некорректной внешней таблицы необходимо удалить ее и создать новую. ## Синтаксис ```sql CREATE UPLOAD EXTERNAL TABLE [db_name.]ext_table_name ( column_name_1 datatype_1, column_name_2 datatype_2, column_name_3 datatype_3 ) LOCATION source_URI FORMAT 'AVRO' [MESSAGE_LIMIT messages_per_segment] ``` ## Параметры * `db_name` — имя логической базы данных, в которой создается внешняя таблица. Указание опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `ext_table_name` — имя создаваемой внешней таблицы загрузки. Для удобства различения таблиц выгрузки и таблиц загрузки рекомендуется задавать имя таблицы, указывающее на ее тип, например `sales_ext_upload`; * `column_name_N` — имя столбца таблицы; * `datatype_N` — тип данных столбца `column_name_N`. Возможные значения см. в разделе [Логические типы данных](../../Поддерживаемые_типы_данных/Логические_типы_данных/Логические_типы_данных.md); * `source_URI` — путь к топику Kafka (см. [Формат пути к внешнему приемнику данных](../../Формат_пути_к_внешнему_приемнику_данных/Формат_пути_к_внешнему_приемнику_данных.md)); * `messages_per_segment` — максимальное количество сообщений, загружаемых в [хранилище](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md) в составе одного блока на один поток загрузки. Значение подбирается в зависимости от параметров производительности инфраструктуры. ## Пример ```sql CREATE UPLOAD EXTERNAL TABLE sales.sales_ext_upload ( identification_number INT, transaction_date TIMESTAMP, product_code VARCHAR(256), product_units INT, store_id INT, description VARCHAR(256) ) LOCATION 'kafka://zk1:2181,zk2:2181,zk3:2181/sales' FORMAT 'AVRO' MESSAGE_LIMIT 1000 ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CREATE_UPLOAD_EXTERNAL_TABLE/CREATE_UPLOAD_EXTERNAL_TABLE.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CREATE_UPLOAD_EXTERNAL_TABLE/CREATE_UPLOAD_EXTERNAL_TABLE.html"
  },"13": {
    "doc": "CREATE VIEW",
    "title": "CREATE VIEW",
    "content": "# CREATE VIEW Запрос позволяет создать или заменить [логическое представление](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md) в [логической базе данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md). В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. ## Синтаксис Создание логического представления: ```sql CREATE VIEW [db_name.]view_name AS SELECT query ``` Создание логического представления с заменой существующего представления, если такое будет найдено: ```sql CREATE OR REPLACE VIEW [db_name.]view_name AS SELECT query ``` ## Параметры * `db_name` — имя логической базы данных, в которой создается или заменяется логическое представление. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `view_name` — имя создаваемого или заменяемого логического представления. В запросе на создание представления имя должно быть уникально среди логических сущностей логической БД; * `query` — [SELECT](../SELECT/SELECT.md)-подзапрос, на основе которого строится логическое представление. ## Ограничения В подзапросе `query` не допускается использование: * логических представлений, * [системных представлений](../../Системные_представления_INFORMATION_SCHEMA/Системные_представления_INFORMATION_SCHEMA.md) `INFORMATION_SCHEMA`, * директивы [FOR SYSTEM_TIME](../SELECT/SELECT.md#sect_for_system_time), * секции `DATASOURCE_TYPE`. ## Пример ```sql CREATE VIEW sales.stores_by_sold_products AS SELECT store_id, SUM(product_units) AS product_amount FROM sales.sales GROUP BY store_id ORDER BY product_amount DESC LIMIT 20 ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CREATE_VIEW/CREATE_VIEW.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/CREATE_VIEW/CREATE_VIEW.html"
  },"14": {
    "doc": "DROP DATABASE",
    "title": "DROP DATABASE",
    "content": "# DROP DATABASE Запрос позволяет удалить [логическую базу данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) и все ее данные. В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. При успешном выполнении логическая база данных удаляется из [логической схемы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md), и все связанные с ней данные удаляются из [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md). **Внимание:** при удалении логической базы данных удаляются **все** ее данные и вся история изменений данных этой логической БД. Удаленные данные не подлежат восстановлению средствами системы. ## Синтаксис ```sql DROP DATABASE db_name ``` ## Параметры * `db_name` — имя удаляемой логической базы данных. ## Ограничения Не допускается удаление системной базы данных с именем `INFORMATION_SCHEMA`. ## Пример ```sql DROP DATABASE sales ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/DROP_DATABASE/DROP_DATABASE.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/DROP_DATABASE/DROP_DATABASE.html"
  },"15": {
    "doc": "DROP DOWNLOAD EXTERNAL TABLE",
    "title": "DROP DOWNLOAD EXTERNAL TABLE",
    "content": "# DROP DOWNLOAD EXTERNAL TABLE Запрос позволяет удалить [внешнюю таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) выгрузки из [логической базы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md). В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. ## Синтаксис ```sql DROP DOWNLOAD EXTERNAL TABLE [db_name.]ext_table_name ``` ## Параметры * `db_name` — имя логической базы данных, из которой удаляется внешняя таблица выгрузки. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `ext_table_name` — имя удаляемой внешней таблицы выгрузки. ## Пример ```sql DROP DOWNLOAD EXTERNAL TABLE sales.sales_ext_download ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/DROP_DOWNLOAD_EXTERNAL_TABLE/DROP_DOWNLOAD_EXTERNAL_TABLE.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/DROP_DOWNLOAD_EXTERNAL_TABLE/DROP_DOWNLOAD_EXTERNAL_TABLE.html"
  },"16": {
    "doc": "DROP TABLE",
    "title": "DROP TABLE",
    "content": "# DROP TABLE Запрос позволяет удалить [логическую таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) и ее данные из [логической базы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md). В зависимости от параметров запроса данные таблицы удаляются из указанных или всех [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md). В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. При успешном выполнении запроса данные логической таблицы удаляются из указанных СУБД хранилища. Логическая таблица удаляется из [логической схемы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md) при удалении данных из последней СУБД. **Внимание:** удаленные данные не подлежат восстановлению средствами системы. Удаление данных из СУБД, заданной для выгрузки в [конфигурации](../../../Эксплуатация/Конфигурация/Конфигурация.md) системы, приведет к невозможности [выгрузки](../../../Работа_с_системой/Выгрузка_данных/Выгрузка_данных.md) этих данных. ## Синтаксис ```sql DROP TABLE [IF EXISTS] [db_name.]table_name [DATASOURCE_TYPE = datasource_alias] ``` Опциональная секция `IF EXISTS` активирует проверку существования логической таблицы до попытки ее удаления. При наличии этой секции запрос по отсутствующей таблице возвращает успешный ответ. ## Параметры * `db_name` — имя логической базы данных, из которой удаляется логическая таблица. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `table_name` — имя удаляемой логической таблицы; * `datasource_alias` — псевдоним СУБД хранилища, из которой удаляются данные логической таблицы. Возможные значения: `adb`, `adqm` и `adg`. Значение можно указывать без кавычек, в одинарных кавычках (например, `'adb'`) или двойных кавычках (например, `\"adb\"`). Если секция `DATASOURCE_TYPE` с псевдонимом не указана, данные удаляются из всех СУБД хранилища. ## Примеры Удаление логической таблицы с удалением данных из всех СУБД хранилища: ```sql DROP TABLE sales.sales ``` Удаление логической таблицы с проверкой на ее существование: ```sql DROP TABLE IF EXISTS sales.sales_unknown_existence ``` Последовательное удаление логической таблицы из ADB и ADG: ```sql DROP TABLE sales.stores DATASOURCE_TYPE = adb DROP TABLE sales.stores DATASOURCE_TYPE = adg ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/DROP_TABLE/DROP_TABLE.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/DROP_TABLE/DROP_TABLE.html"
  },"17": {
    "doc": "DROP UPLOAD EXTERNAL TABLE",
    "title": "DROP UPLOAD EXTERNAL TABLE",
    "content": "# DROP UPLOAD EXTERNAL TABLE Запрос позволяет удалить [внешнюю таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) загрузки из [логической базы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md). В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. ## Синтаксис ```sql DROP UPLOAD EXTERNAL TABLE [db_name.]ext_table_name ``` ## Параметры * `db_name` — имя логической базы данных, из которой удаляется внешняя таблица загрузки. Опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `ext_table_name` — имя удаляемой внешней таблицы загрузки. ## Пример ```sql DROP UPLOAD EXTERNAL TABLE sales.sales_ext_upload ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/DROP_UPLOAD_EXTERNAL_TABLE/DROP_UPLOAD_EXTERNAL_TABLE.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/DROP_UPLOAD_EXTERNAL_TABLE/DROP_UPLOAD_EXTERNAL_TABLE.html"
  },"18": {
    "doc": "DROP VIEW",
    "title": "DROP VIEW",
    "content": "# DROP VIEW Запрос позволяет удалить [логическое представление](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md) из [логической базы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md). В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. При успешном выполнении запроса логическое представление удаляется из [логической схемы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md). ## Синтаксис ```sql DROP VIEW [db_name.]view_name ``` ## Параметры * `db_name` — имя логической базы данных, из которой удаляется логическое представление. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `view_name` — имя удаляемого логического представления. ## Пример ```sql DROP VIEW sales.stores_by_sold_products ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/DROP_VIEW/DROP_VIEW.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/DROP_VIEW/DROP_VIEW.html"
  },"19": {
    "doc": "GET_DELTA_BY_DATETIME",
    "title": "GET_DELTA_BY_DATETIME",
    "content": "# GET_DELTA_BY_DATETIME Запрос позволяет получить информацию о последней закрытой [дельте](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md) на указанные дату и время. Перед выполнением запроса необходимо определить [логическую базу данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), [используемую по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md), если она еще не определена. В ответе возвращается: * объект ResultSet c одной записью, содержащей информацию о дельте, при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. Возвращаемая информация включает следующие параметры: * `delta_num` — номер дельты, * `delta_date` — дата и время закрытия дельты, * `[cn_from, cn_to]` — диапазон номеров выполненных [операций записи](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Операция_записи/Операция_записи.md). ## Синтаксис ```sql GET_DELTA_BY_DATETIME(date_time_expression) ``` ## Параметры * `date_time_expression` — момент даты-времени вида `'YYYY-MM-DD HH:MM:SS'`. ## Пример ```sql GET_DELTA_BY_DATETIME('2021-03-25 07:30:32') ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/GET_DELTA_BY_DATETIME/GET_DELTA_BY_DATETIME.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/GET_DELTA_BY_DATETIME/GET_DELTA_BY_DATETIME.html"
  },"20": {
    "doc": "GET_DELTA_BY_NUM",
    "title": "GET_DELTA_BY_NUM",
    "content": "# GET_DELTA_BY_NUM Запрос позволяет получить информацию о закрытой [дельте](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md) по ее номеру. Перед выполнением запроса необходимо определить логическую базу данных, [используемую по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md), если она еще не определена. В ответе возвращается: * объект ResultSet c одной записью, содержащей информацию о дельте, при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. Возвращаемая информация включает следующие параметры: * `delta_num` — номер дельты, * `delta_date` — дата и время закрытия дельты, * `[cn_from, cn_to]` — диапазон номеров выполненных [операций записи](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Операция_записи/Операция_записи.md). ## Синтаксис ```sql GET_DELTA_BY_NUM(delta_num) ``` ## Параметры * `delta_num` — целый неотрицательный номер дельты. ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/GET_DELTA_BY_NUM/GET_DELTA_BY_NUM.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/GET_DELTA_BY_NUM/GET_DELTA_BY_NUM.html"
  },"21": {
    "doc": "GET_DELTA_HOT",
    "title": "GET_DELTA_HOT",
    "content": "# GET_DELTA_HOT Запрос позволяет получить информацию о горячей [дельте](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md). Перед выполнением запроса необходимо определить логическую базу данных, [используемую по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md), если она еще не определена. В ответе возвращается: * объект ResultSet c одной записью при успешном выполнении запроса. Если дельта присутствует, запись содержит информацию о дельте, иначе — возвращается пустая запись; * исключение при неуспешном выполнении запроса. Возвращаемая информация включает следующие параметры: * `delta_num` — номер дельты; * `[cn_from, cn_to]` — диапазон порядковых номеров непрерывной последовательности [операций записи](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Операция_записи/Операция_записи.md), выполненных в рамках дельты; * `cn_max` — максимальный номер операции среди операций записи, выполненных в рамках дельты. До успешного завершения операций записи возвращается максимальный номер операции записи в последней закрытой дельте; * `is_rolling_back` — флаг отката; * `write_op_finished` — массив операций записей, выполненных в рамках дельты. В связи с многопоточной обработкой операций значения `cn_to` и `cn_max` горячей дельты могут отличаться. Например, если в рамках горячей дельты завершены операции записи с номерами 1, 2, 3 и 7, то значение `cn_to` этой дельты равно 3, а значение `cn_max` равно 7. ## Синтаксис ```sql GET_DELTA_HOT() ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/GET_DELTA_HOT/GET_DELTA_HOT.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/GET_DELTA_HOT/GET_DELTA_HOT.html"
  },"22": {
    "doc": "GET_DELTA_OK",
    "title": "GET_DELTA_OK",
    "content": "# GET_DELTA_OK Запрос позволяет получить информацию о последней закрытой [дельте](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md). Перед выполнением запроса необходимо определить логическую базу данных, [используемую по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md), если она еще не определена. В ответе возвращается: * объект ResultSet c одной записью при успешном выполнении запроса. Если дельта присутствует, запись содержит информацию о дельте, иначе — возвращается пустая запись; * исключение при неуспешном выполнении запроса. Возвращаемая информация включает следующие параметры: * `delta_num` — номер дельты, * `delta_date` — дата и время закрытия, * `[cn_from, cn_to]` — диапазон номеров выполненных [операций записи](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Операция_записи/Операция_записи.md). ## Синтаксис ```sql GET_DELTA_OK() ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/GET_DELTA_OK/GET_DELTA_OK.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/GET_DELTA_OK/GET_DELTA_OK.html"
  },"23": {
    "doc": "INSERT INTO download_external_table",
    "title": "INSERT INTO download_external_table",
    "content": "# INSERT INTO download_external_table Запрос позволяет выгрузить данные, выбранные [SELECT](../SELECT/SELECT.md)-подзапросом к [логической базе данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), во внешний приемник данных. Запрос обрабатывается в порядке, описанном в разделе [Порядок обработки запросов на выгрузку данных](../../../Обзор_понятий_компонентов_и_связей/Связи_с_другими_системами_и_компонентами/Порядок_обработки_запросов_на_выгрузку_данных/Порядок_обработки_запросов_на_выгрузку_данных.md). В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. При успешном выполнении запроса данные выгружаются из СУБД [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md), выбранной для выгрузки в [конфигурации](../../../Эксплуатация/Конфигурация/Конфигурация.md) системы. Данные выгружаются в том формате и в тот приемник данных, которые были указаны [при создании внешней таблицы выгрузки](../CREATE_DOWNLOAD_EXTERNAL_TABLE/CREATE_DOWNLOAD_EXTERNAL_TABLE.md). Формат данных соответствует описанному в разделе [Формат выгрузки данных](../../Формат_выгрузки_данных/Формат_выгрузки_данных.md). **Примечания:** * Перед выполнением запроса необходимо создать [внешнюю таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) с указанием [пути](../../Формат_пути_к_внешнему_приемнику_данных/Формат_пути_к_внешнему_приемнику_данных.md) к топику Kafka. Подробнее о порядке выполнения действий для выгрузки данных см. в разделе [Выгрузка данных](../../../Работа_с_системой/Выгрузка_данных/Выгрузка_данных.md). * Имена и порядок следования столбцов должны совпадать в SELECT-подзапросе на выгрузку данных и внешней таблице выгрузки. ## Синтаксис ```sql INSERT INTO [db_name.]ext_table_name SELECT ... ``` ## Параметры * `db_name` — имя логической базы данных, из которой выгружаются данные. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `ext_table_name` — имя внешней таблицы выгрузки. ## Ограничения * Секция [DATASOURCE_TYPE](../SELECT/SELECT.md#param_datasource_type) игнорируется в SELECT-подзапросе. * Выгружаемые данные должны быть доступны в СУБД, выбранной для выгрузки в конфигурации системы. ## Пример ```sql INSERT INTO sales.sales_ext_download SELECT * FROM sales.sales WHERE sales.product_units > 2 ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/INSERT_INTO_download_external_table/INSERT_INTO_download_external_table.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/INSERT_INTO_download_external_table/INSERT_INTO_download_external_table.html"
  },"24": {
    "doc": "INSERT INTO logical_table",
    "title": "INSERT INTO logical_table",
    "content": "# INSERT INTO logical_table Запрос позволяет загрузить данные в [логическую таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) [логической базы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) из внешнего источника данных. Загружаемые данные должны соответствовать формату, [указанному при создании внешней таблицы загрузки](../CREATE_UPLOAD_EXTERNAL_TABLE/CREATE_UPLOAD_EXTERNAL_TABLE.md) и описанному в разделе [Формат загрузки данных](../../Формат_загрузки_данных/Формат_загрузки_данных.md). Запрос обрабатывается в порядке, описанном в разделе [Порядок обработки запросов на загрузку данных](../../../Обзор_понятий_компонентов_и_связей/Связи_с_другими_системами_и_компонентами/Порядок_обработки_запросов_на_загрузку_данных/Порядок_обработки_запросов_на_загрузку_данных.md). В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. При успешном выполнении запроса данные загружаются в СУБД [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md), выбранные для размещения данных таблицы. Месторасположение данных таблицы можно задавать запросами [CREATE TABLE](../CREATE_TABLE/CREATE_TABLE.md) и [DROP TABLE](../DROP_TABLE/DROP_TABLE.md). **Примечания** * Перед выполнением запроса необходимо создать [внешнюю таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md), загрузить данные в топик Kafka и открыть [дельту](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md). Подробнее о порядке выполнения действий для загрузки данных см. в разделе [Загрузка данных](../../../Работа_с_системой/Загрузка_данных/Загрузка_данных.md). * Имена и порядок следования столбцов должны совпадать в топике Kafka, внешней таблице загрузке и запросе на загрузку данных. Исключением является служебное поле `sys_op`, которое обязательно для топика и опционально для внешней таблицы, но должно отсутствовать в запросе на загрузку данных при явном перечислении столбцов. Подробнее о требованиях к загружаемым данным см. в разделе [Формат загрузки данных](../../Формат_загрузки_данных/Формат_загрузки_данных.md). ## Синтаксис Запрос с явным перечислением столбцов внешней таблицы: ```sql INSERT INTO [db_name.]table_name SELECT column_list FROM [db_name.]ext_table_name ``` Запрос с использованием символа `*`: ```sql INSERT INTO [db_name.]table_name SELECT * FROM [db_name.]ext_table_name ``` ## Параметры * `db_name` — имя логической базы данных. Опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `table_name` — имя логической таблицы, в которую загружаются данные; * `column_list` — список имен столбцов внешней таблицы загрузки. Должен включать все имена столбцов логической таблицы. Если внешняя таблица содержит служебное поле `sys_op`, оно не указывается; * `ext_table_name` — имя внешней таблицы загрузки. ## Ограничения Выполнение запроса возможно только при наличии открытой дельты (см. [BEGIN DELTA](../BEGIN_DELTA/BEGIN_DELTA.md)). ## Пример Пример загрузки данных с открытием и закрытием дельты: ```sql BEGIN DELTA INSERT INTO sales.sales SELECT * FROM sales.sales_ext_upload COMMIT DELTA ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/INSERT_INTO_logical_table/INSERT_INTO_logical_table.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/INSERT_INTO_logical_table/INSERT_INTO_logical_table.html"
  },"25": {
    "doc": "ROLLBACK DELTA",
    "title": "ROLLBACK DELTA",
    "content": "# ROLLBACK DELTA Запрос позволяет откатить горячую [дельту](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md) — вернуть [логическую базу данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) в состояние, которое предшествовало изменениям этой дельты. Перед выполнением запроса необходимо определить логическую базу данных, [используемую по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md), если она еще не определена. Если существуют незавершенные операции загрузки данных, то откат выполнить невозможно. При выполнении ROLLBACK все успешно завершенные операции откатятся. В ответе возвращается: * объект ResultSet c одной записью, содержащей номер последней закрытой дельты, при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. При успешном выполнении запроса все изменения данных горячей дельты отменяются и зарезервированный ранее номер горячей дельты освобождается; номер последней закрытой дельты не изменяется. **Примечание:** откат закрытой дельты невозможен. ## Синтаксис ```sql ROLLBACK DELTA ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/ROLLBACK_DELTA/ROLLBACK_DELTA.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/ROLLBACK_DELTA/ROLLBACK_DELTA.html"
  },"26": {
    "doc": "SELECT",
    "title": "SELECT",
    "content": "# SELECT Запрос позволяет выбрать данные из [логических таблиц](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) и [представлений](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md). Запрос можно использовать как самостоятельный запрос для [чтения данных](../../../Работа_с_системой/Запрос_данных/Запрос_данных.md), а также в качестве подзапроса в [запросах на выгрузку данных](../INSERT_INTO_download_external_table/INSERT_INTO_download_external_table.md) и запросах на [создание](../CREATE_VIEW/CREATE_VIEW.md) и [обновление](../ALTER_VIEW/ALTER_VIEW.md) логических представлений. Для выбора доступны следующие данные: * актуальные данные; * архивные данные, которые были актуальны в указанный момент времени; * изменения данных, выполненные в рамках указанного диапазона [дельт](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md). Запрос обрабатывается в порядке, описанном в разделе [Порядок обработки запросов на чтение данных](../../../Обзор_понятий_компонентов_и_связей/Связи_с_другими_системами_и_компонентами/Порядок_обработки_запросов_на_чтение_данных/Порядок_обработки_запросов_на_чтение_данных.md). В ответе возвращается: * объект ResultSet c выбранными записями при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. ## Синтаксис ```sql SELECT column_list FROM [db_name.]entity_name [FOR SYSTEM_TIME time_expression [AS alias_name]] [DATASOURCE_TYPE = 'datasource_alias'] ``` Описание параметров запроса см. [ниже](#параметры). В запросе можно использовать следующие секции, которые должны быть указаны в порядке их перечисления: * `FOR SYSTEM_TIME` — для указания момента времени или периода, за который выбираются данные или изменения данных. Если секция не указана, данные выбираются по состоянию на дату и время обработки запроса; * `JOIN ON` — для соединения данных нескольких логических таблиц или представлений; * `WHERE` — для указания условий выбора данных; * `GROUP BY` — для группировки данных; * `HAVING` — для указания условий выбора сгруппированных данных; * `ORDER BY` — для сортировки данных; * `LIMIT` — для ограничения количества возвращаемых строк; * `DATASOURCE_TYPE` — для указания [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md), из которой выбираются данные. Для имен таблиц, представлений и столбцов можно использовать псевдонимы. В запросе доступны оператор `DISTINCT`, агрегатные функции, а также соединение нескольких логических таблиц или логических представлений из одной или нескольких [логических БД](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md). Поддерживаются следующие типы соединений: * `[INNER]` — внутреннее соединение, * `NATURAL` — внутреннее соединение по всем столбцам с одинаковыми именами, ключи соединения не указываются, * `LEFT [OUTER]` — левое внешнее соединение, * `RIGHT [OUTER]` — правое внешнее соединение, * `FULL [OUTER]` — полное внешнее соединение, * `CROSS` — декартово произведение таблиц или представлений, ключи соединения не указываются. **Примечание:** некоторые агрегатные функции и типы соединений недоступны для исполнения в определенных СУБД хранилища. Список доступных возможностей см. в разделе [Поддержка SQL](../../Поддержка_SQL/Поддержка_SQL.md). ## Параметры * `column_list` — список выбираемых столбцов таблицы или представления. Допустимо указывать символ `*` для выбора всех столбцов; * `db_name` — имя логической базы данных, из которой выбираются данные. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `entity_name` — имя таблицы или представления, из которого выбираются данные; * `time_expression` — выражение, которое задает момент или период времени, за который выбираются данные или изменения данных. Формат выражения см. [ниже](#sect_for_system_time); * `alias_name` — псевдоним таблицы или представления. Может включать латинские буквы, цифры и символы подчеркивания; * `datasource_alias` — системный псевдоним СУБД хранилища, из которой выбираются данные. Возможные значения: adb, adqm, adg. ## Синтаксис директивы FOR SYSTEM_TIME Директива `FOR SYSTEM_TIME` позволяет указать момент, по состоянию на который запрашиваются данные, или период (диапазон дельт), за который запрашиваются изменения. Директива относится к логической таблице или представлению, после имени которого она следует. Если в запросе соединяется несколько логических таблиц и представлений, для каждой логической сущности можно указать свою директиву, при этом значения директив могут различаться (см. пример [ниже](#ex_different_system_times)). Директива указывается в формате `FOR SYSTEM_TIME time_expression`, где выражение `time_expression` принимает одно из следующих значений: * `AS OF 'YYYY-MM-DD HH:MM:SS'` — для запроса данных, актуальных на указанную дату и время; * `AS OF DELTA_NUM delta_num` — для запроса данных, актуальных на дату и время закрытия дельты с номером `delta_num`; * `AS OF LATEST_UNCOMMITTED_DELTA` — для запроса данных на текущий момент, включая данные, загруженные в рамках открытой (горячей) дельты. По горячей дельте возвращаются записи, загруженные в рамках непрерывного диапазона завершенных операций записи (см. параметры `cn_from` и `cn_to` в разделе [GET_DELTA_HOT](../GET_DELTA_HOT/GET_DELTA_HOT.md)); * `STARTED IN (delta_num1, delta_num2)` — для запроса данных, добавленных или измененных в период между дельтой `delta_num1` и дельтой `delta_num2` (включительно); * `FINISHED IN (delta_num1, delta_num2)` — для запроса данных, удаленных в период между дельтой `delta_num1` и дельтой `delta_num2` (включительно). ## Ограничения * Не допускается комбинирование подзапросов к логическим базам данных с подзапросами к системным представлениям `INFORMATION_SCHEMA`. * Если ключами секции `JOIN` выступают поля типа Nullable, то строки, где хотя бы один из ключей имеет значение NULL, не соединяются. ## Примеры Запрос с неявным указанием столбцов и секцией `WHERE`: ```sql SELECT * FROM sales.sales WHERE store_id = 1234 ``` Запрос с явным указанием столбцов и выбором данных из определенной СУБД хранилища (ADQM): ```sql SELECT sold.store_id, sold.product_amount FROM sales.stores_by_sold_products AS sold DATASOURCE_TYPE = 'adqm' ``` Запрос с агрегацией, группировкой и сортировкой данных, а также выбором первых 20 строк: ```sql SELECT s.store_id, SUM(s.product_units) AS product_amount FROM sales.sales AS s GROUP BY (s.store_id) ORDER BY product_amount DESC LIMIT 20 ``` Запрос записей, актуальных на момент закрытия дельты с номером 9: ```sql SELECT * FROM sales.sales FOR SYSTEM_TIME AS OF DELTA_NUM 9 ``` Запрос с соединением данных двух логических таблиц из двух различных логических БД: ```sql SELECT st.identification_number, st.category, s.product_code FROM sales.stores FOR SYSTEM_TIME AS OF LATEST_UNCOMMITTED_DELTA AS st INNER JOIN sales2.sales FOR SYSTEM_TIME AS OF LATEST_UNCOMMITTED_DELTA AS s ON st.identification_number = s.store_id ``` Запрос с соединением записей логической таблицы, добавленных и измененных в двух различных диапазонах дельт: ```sql -- выбор логической базы данных sales в качестве базы данных по умолчанию use sales -- запрос данных из логической таблицы prices SELECT p1.product_code, p1.price as feb_price, p2.price as march_price, (p2.price - p1.price) as diff FROM (SELECT product_code, price from sales.prices FOR SYSTEM_TIME STARTED IN(3,6)) AS p1 FULL JOIN (select product_code, price from sales.prices FOR SYSTEM_TIME STARTED IN(7,10)) AS p2 ON p1.product_code = p2.product_code WHERE p1.product_code is NOT NULL ORDER BY diff DESC LIMIT 50 DATASOURCE_TYPE = 'adb' ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/SELECT/SELECT.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/SELECT/SELECT.html"
  },"27": {
    "doc": "SELECT FROM INFORMATION SCHEMA",
    "title": "SELECT FROM INFORMATION SCHEMA",
    "content": "# SELECT FROM INFORMATION SCHEMA Запрос позволяет получить метаданные объектов [логической схемы](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md), описанные в разделе [Системные представления (INFORMATION_SCHEMA)](../../Системные_представления_INFORMATION_SCHEMA/Системные_представления_INFORMATION_SCHEMA.md). Возможности запроса отличаются от возможностей [SELECT](../SELECT/SELECT.md)-запроса к логическим базам данных. В ответе возвращается: * объект ResultSet c выбранными записями при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. ## Синтаксис ```sql SELECT column_list FROM [INFORMATION_SCHEMA.]system_view_name [AS alias_name] ``` Описание параметров запроса см. [ниже](#параметры). Префикс `INFORMATION_SCHEMA` перед именем системного представления опционален, если до этого был выполнен запрос [USE INFORMATION_SCHEMA](../USE_INFORMATION_SCHEMA/USE_INFORMATION_SCHEMA.md). Для имен системных представлений и столбцов можно использовать псевдонимы. В запросе поддерживаются следующие секции, которые должны быть указаны в порядке их перечисления: * `JOIN ON` — для соединения данных нескольких системных представлений; * `WHERE` — для указания условий выбора данных; * `GROUP BY` — для группировки данных; * `ORDER BY` — для сортировки данных; * `LIMIT` — для ограничения количества возвращаемых строк. **Внимание:** строковые значения столбцов в секции `WHERE` необходимо указывать в верхнем регистре (например, `WHERE table_schema = 'SALES'`). Поддерживаются следующие типы соединений системных представлений: * `[INNER]` — внутреннее соединение, * `LEFT [OUTER]` — левое внешнее соединение, * `RIGHT [OUTER]` — правое внешнее соединение, * `FULL [OUTER]` — полное внешнее соединение, * `CROSS` — декартово произведение, ключи соединения не указываются. ## Параметры * `column_list` — список выбираемых столбцов. Допустимо указывать символ `*` для выбора всех столбцов; * `system_view_name` — имя системного представления, из которого запрашивается информация. Возможные значения см. в разделе [Системные представления (INFORMATION_SCHEMA)](../../Системные_представления_INFORMATION_SCHEMA/Системные_представления_INFORMATION_SCHEMA.md); * `alias_name` — псевдоним системного представления. ## Ограничения Не допускается комбинирование подзапросов к `INFORMATION_SCHEMA` с подзапросами к логическим базам данных. ## Примеры Запрос списка всех [логических БД](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) [окружения](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Окружение/Окружение.md) с лексической сортировкой по возрастанию: ```sql SELECT schema_name FROM INFORMATION_SCHEMA.schemata ORDER BY schema_name ``` Запрос информации о логических сущностях логической БД `SALES`: ```sql SELECT * FROM INFORMATION_SCHEMA.tables WHERE table_schema = 'SALES' ``` Запрос списка имен, типов и столбцов логических сущностей окружения: ```sql SELECT TC.table_schema, TC.table_name, TT.table_type, TC.column_name FROM information_schema.columns AS TC JOIN information_schema.tables AS TT ON TC.table_schema = TT.table_schema and TC.table_name = TT.table_name ORDER BY TC.table_schema, TC.table_name ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/SELECT_FROM_INFORMATION_SCHEMA/SELECT_FROM_INFORMATION_SCHEMA.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/SELECT_FROM_INFORMATION_SCHEMA/SELECT_FROM_INFORMATION_SCHEMA.html"
  },"28": {
    "doc": "TRUNCATE HISTORY",
    "title": "TRUNCATE HISTORY",
    "content": "# TRUNCATE HISTORY Запрос позволяет удалить записи [логической таблицы](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) согласно заданным условиям. В зависимости от параметров запроса удаляются записи одной из категорий: * записи таблицы, которые были перенесены в архив до указанного момента времени (включительно) и соответствуют условию, заданному в запросе; * все архивные и актуальные записи таблицы, которые соответствуют условию, заданному в запросе. Если в запросе указан момент времени, система определяет [дельту](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md), которая являлась последней закрытой дельтой на тот момент, и удаляет все записи логической таблицы, которые стали архивными в эту дельту или ранее и соответствуют заданному условию. Иначе, если задано ключевое слово `infinite`, удаляются все записи таблицы, соответствующие условию. В ответе возвращается: * пустой объект ResultSet при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. В результате успешного выполнения запроса записи, удовлетворяющие его параметрам, удаляются из логической таблицы. **Внимание:** удаленные данные не подлежат восстановлению средствами системы. На рисунке ниже показан пример работы запроса с указанным моментом времени. В примере логическая таблица содержит три записи об одном клиенте, загруженные в рамках трех разных дельт (дельта 0, дельта 1, дельта 2) в течение одного дня (2021-03-03). В результате исполнения запроса удаляется `запись 0`: на момент времени 18:00:00 `дельта 1` была последней закрытой дельтой, и только `запись 0` была архивной в эту дельту (`запись 1` была актуальной). ![](truncate_history.svg) {: .figure-center} *Удаление архивной записи по запросу с меткой времени* {: .figure-caption-center} ## Синтаксис ```sql TRUNCATE HISTORY [db_name.]table_name FOR SYSTEM_TIME AS OF date_time_expression [WHERE filter_expression] ``` ## Параметры * `db_name` — имя логической базы данных. Указывается опционально, если выбрана логическая БД, [используемая по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md); * `table_name` — имя логической таблицы, из которой удаляются записи; * `date_time_expression` — выражение, определяющее категорию удаляемых записей. Может принимать следующие значения: * `'YYYY-MM-DD HH:MM:SS'` — удаление архивных записей по указанный момент времени; * `'infinite'` — удаление всех актуальных и архивных записей; * `filter_expression` — условие выбора записей, подлежащих удалению. ## Пример Удаление архивных записей таблицы `sales`, в которых значение столбца `product_units` меньше `10`, по момент времени `'2019-12-23 15:15:14'`: ```sql TRUNCATE HISTORY sales.sales FOR SYSTEM_TIME AS OF '2019-12-23 15:15:14' WHERE product_units < 10 ``` Удаление всех актуальных и архивных записей таблицы `stores`, в которых значение столбца `identification_number` равно `123456`: ```sql TRUNCATE HISTORY sales.stores FOR SYSTEM_TIME AS OF 'infinite' WHERE identification_number = 123456 ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/TRUNCATE_HISTORY/TRUNCATE_HISTORY.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/TRUNCATE_HISTORY/TRUNCATE_HISTORY.html"
  },"29": {
    "doc": "USE",
    "title": "USE",
    "content": "# USE Запрос позволяет изменить [логическую базу данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) [по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md) на указанную логическую базу данных. Логическую базу данных по умолчанию **необходимо** определить перед выполнением запросов, предназначенных для управления [дельтой](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md) и получения информации о ней. Это действие также можно выполнить перед другими запросами, что позволит не указывать имя логической БД перед именами логических сущностей в запросах к одной и той же логической базе данных. В ответе возвращается: * объект ResultSet c одной записью, содержащей имя выбранной логической базы данных, при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. При успешном выполнении запроса указанная логическая база данных выбирается и используется по умолчанию до наступления первого из следующих событий: переключение на другую логическую БД с помощью запроса `USE` или закрытие соединения с системой. **Примечание:** альтернативно можно определить логическую базу данных по умолчанию в настройках JDBC-подключения (см. [Определение логической БД по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md)). ## Синтаксис ```sql USE db_name ``` ## Параметры * `db_name` — имя логической базы данных, подлежащей установке по умолчанию. ## Пример ```sql USE sales ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/USE/USE.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/USE/USE.html"
  },"30": {
    "doc": "USE INFORMATION_SCHEMA",
    "title": "USE INFORMATION_SCHEMA",
    "content": "# USE INFORMATION_SCHEMA Запрос позволяет изменить [логическую базу данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) [по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md) на [сервисную базу данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Сервисная_база_данных/Сервисная_база_данных.md). **Совет:** запрос можно выполнить перед запросами [SELECT FROM INFORMATION_SCHEMA](../SELECT_FROM_INFORMATION_SCHEMA/SELECT_FROM_INFORMATION_SCHEMA.md) — это даст возможность не указывать префикс `INFORMATION_SCHEMA` перед именами системных представлений в запросах к сервисной базе данных. В ответе возвращается: * объект ResultSet c одной записью, содержащей имя сервисной базы данных (`information_schema`), при успешном выполнении запроса; * исключение при неуспешном выполнении запроса. ## Синтаксис ```sql USE INFORMATION_SCHEMA ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/USE_INFORMATION_SCHEMA/USE_INFORMATION_SCHEMA.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/USE_INFORMATION_SCHEMA/USE_INFORMATION_SCHEMA.html"
  },"31": {
    "doc": "Введение",
    "title": "Введение",
    "content": "# Введение DTM (далее — система) — система для построения витрин данных, позволяющая работать как с актуальными, так и архивными данными. Система выполняет роль интеграционного сервиса, объединяющего различные СУБД хранилища, и предоставляет следующие возможности: * работа с данными с использованием единой логической схемы данных, не зависящей от типа СУБД хранилища; * параллельная загрузка и выгрузка больших объемов данных; * запрос и выгрузка данных, актуальных по состоянию на указанный момент времени; * частичное или полное удаление истории изменений данных. Работа с системой возможна с помощью любых программных инструментов, которые предоставляют подключение через JDBC-интерфейс. Для запросов к системе используется декларативный язык запросов на основе SQL, в некоторых случаях совпадающий с SQL-стандартом (см. [Запросы SQL+](../Справочная_информация/Запросы_SQLplus/Запросы_SQLplus.md)). ",
    "url": "/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5.html",
    "relUrl": "/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5.html"
  },"32": {
    "doc": "Версионирование данных",
    "title": "Версионирование данных",
    "content": "# Версионирование данных Все записи [логической таблицы](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) с одинаковым первичным ключом рассматриваются системой как исторические состояния одного и того же объекта. Одновременно объект системы может иметь множество архивных состояний, а также не более одного актуального и не более одного нового (“горячего”) состояния. Записи, загружаемые в логическую таблицу в рамках одной [дельты](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md), должны иметь уникальный первичный ключ. Для того чтобы система могла корректно определить, что делать с загруженными записями, каждая из них должна содержать значение `sys_op`. Поле `sys_op` является служебным и может принимать следующие значения: * 0 — нужно добавить новую запись или обновить существующую, если такая будет найдена; * 1 — нужно удалить существующую запись. Если поле `sys_op` отсутствует в схеме данных Avro и (или) в загружаемых записях, при попытке выполнить запрос [INSERT INTO logical_table](../../../Справочная_информация/Запросы_SQLplus/INSERT_INTO_logical_table/INSERT_INTO_logical_table.md) система вернет исключение. Все загружаемые данные сохраняются в виде горячих записей, и затем, при фиксации изменений, система обновляет состояние объектов логических таблиц в соответствии с новыми данными. Порядок применения каждой из новых записей зависит от наличия/отсутствия актуальной записи с таким же первичным ключом и значения `sys_op` новой записи: * Если актуальная запись есть и значение `sys_op` новой записи равно 0, актуальная запись перемещается в архив, а новая запись сохраняется в качестве актуальной. * Если актуальная запись есть и значение `sys_op` новой записи равно 1, актуальная запись перемещается в архив. Добавление новой записи не происходит, и среди актуальных записей не остается записей с этим первичным ключом. * Если актуальной записи нет, новая запись сохраняется в качестве актуальной. **Примечание:** для удаления записи нужно, чтобы все данные новой записи (кроме значения `sys_op`) совпадали с данными одной из актуальных записей логической таблицы. Если первичные ключи актуальной и новой записи совпадают, но другие данные этих записей различаются, выдается исключение и запись не удаляется. ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%92%D0%B5%D1%80%D1%81%D0%B8%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%92%D0%B5%D1%80%D1%81%D0%B8%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%92%D0%B5%D1%80%D1%81%D0%B8%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%92%D0%B5%D1%80%D1%81%D0%B8%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"33": {
    "doc": "Внешняя таблица",
    "title": "Внешняя таблица",
    "content": "# Внешняя таблица _Внешняя таблица_ задает набор параметров внешнего приемника данных (например, топика Kafka), используемого для параллельной [загрузки](../../../Работа_с_системой/Загрузка_данных/Загрузка_данных.md) или [выгрузки](../../../Работа_с_системой/Выгрузка_данных/Выгрузка_данных.md) данных. Набор включает следующие параметры: * список передаваемых полей, * путь к внешнему приемнику данных, * формат обмена данными. Внешняя таблица представляет собой декларацию источника/приемника данных и формата загрузки/выгрузки данных и не хранит сами данные. Внешние таблицы разделяются по назначению: * _внешние таблицы загрузки_ используются для загрузки данных в систему, * _внешние таблицы выгрузки_ используются для выгрузки данных из системы. Внешние таблицы можно создавать и удалять: * [Создание внешней таблицы загрузки](../../../Работа_с_системой/Управление_схемой_данных/Создание_внешней_таблицы_загрузки/Создание_внешней_таблицы_загрузки.md), * [Создание внешней таблицы выгрузки](../../../Работа_с_системой/Управление_схемой_данных/Создание_внешней_таблицы_выгрузки/Создание_внешней_таблицы_выгрузки.md), * [Удаление внешней таблицы загрузки](../../../Работа_с_системой/Управление_схемой_данных/Удаление_внешней_таблицы_загрузки/Удаление_внешней_таблицы_загрузки.md), * [Удаление внешней таблицы выгрузки](../../../Работа_с_системой/Управление_схемой_данных/Удаление_внешней_таблицы_выгрузки/Удаление_внешней_таблицы_выгрузки.md). В зависимости от требований проекта созданная внешняя таблица может использоваться однократно или многократно. Следует учитывать, что потоки обмена данными с системой должны быть разделены по приемникам данных в следующих разрезах: * по [логическим таблицам](../Логическая_таблица/Логическая_таблица.md), * по направлениям передачи данных (загрузка/выгрузка), * (опционально) на основе каких-либо дополнительных критериев (например, по целевым информационным системам). Например, если для логической таблицы транзакций нужно поддержать и загрузку, и выгрузку данных, следует создать две (или более) внешние таблицы: хотя бы одну таблицу загрузки транзакций и хотя бы одну — выгрузки. ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%92%D0%BD%D0%B5%D1%88%D0%BD%D1%8F%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0/%D0%92%D0%BD%D0%B5%D1%88%D0%BD%D1%8F%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%92%D0%BD%D0%B5%D1%88%D0%BD%D1%8F%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0/%D0%92%D0%BD%D0%B5%D1%88%D0%BD%D1%8F%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0.html"
  },"34": {
    "doc": "Выгружаемые типы данных",
    "title": "Выгружаемые типы данных",
    "content": "# Выгружаемые типы данных Типы данных Avro, выгружаемые из системы, зависят от СУБД хранилища, из которой выгружаются данные. В таблице ниже для каждого [логического типа данных](../Логические_типы_данных/Логические_типы_данных.md) указаны выгружаемые типы данных Avro. Подробнее о типах данных Avro см. в [официальной документации](https://docs.oracle.com/database/nosql-12.1.3.0/GettingStartedGuide/avroschemas.html#avro-primitivedatatypes) Apache Avro. | Логический тип данных | Тип данных Avro, выгружаемый из ADB | Тип данных Avro, выгружаемый из ADG | Тип данных Avro, выгружаемый из ADQM |:-|:-|:-|:- | BOOLEAN | boolean | boolean | int | VARCHAR (n) | string | string | string | UUID | string | string | string | INT | long | long | long | BIGINT | long | long | long | DOUBLE | double | double | double | FLOAT | float | float | float | DATE | int | int | int | TIME (precision) | long | long | long | TIMESTAMP (precision) | long | long | long ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%92%D1%8B%D0%B3%D1%80%D1%83%D0%B6%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%92%D1%8B%D0%B3%D1%80%D1%83%D0%B6%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%92%D1%8B%D0%B3%D1%80%D1%83%D0%B6%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%92%D1%8B%D0%B3%D1%80%D1%83%D0%B6%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"35": {
    "doc": "Выгрузка данных",
    "title": "Выгрузка данных",
    "content": "# Выгрузка данных Система позволяет выгружать актуальные и архивные данные, а также совокупность изменений, выполненных в рамках указанных дельт. Возможные способы выборки выгружаемых данных описаны в секции [FOR SYSTEM_TIME](../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md#sect_for_system_time) раздела [SELECT](../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md). Для выгрузки данных нужен существующий топик Kafka. Если в брокере сообщений Kafka настроено автоматическое создание топиков, то дополнительные действия не требуются. Иначе необходимо создать топик, если он еще не создан. Подробнее о создании топиков см. в документации Kafka: * раздел [Quick Start](https://kafka.apache.org/documentation/#quickstart), * раздел [Adding and removing topics](https://kafka.apache.org/documentation/#basic_ops_add_topic). Чтобы выгрузить данные из [логической таблицы](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) или [логического представления](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md) во внешнюю информационную систему: 1. [Создайте](../../Справочная_информация/Запросы_SQLplus/CREATE_DOWNLOAD_EXTERNAL_TABLE/CREATE_DOWNLOAD_EXTERNAL_TABLE.md) [внешнюю таблицу](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) выгрузки, если она еще не создана. 2. Выполните запрос [INSERT INTO download_external_table](../../Справочная_информация/Запросы_SQLplus/INSERT_INTO_download_external_table/INSERT_INTO_download_external_table.md) на выгрузку данных в топик. В запросе нужно указать внешнюю таблицу выгрузки, определяющую параметры выгрузки. 3. Выгрузите данные из топика во внешнюю информационную систему. Созданные внешние таблицы выгрузки можно использовать повторно или удалить. ## Пример ```sql -- выбор логической базы данных sales в качестве базы данных по умолчанию USE sales -- создание внешней таблицы выгрузки CREATE DOWNLOAD EXTERNAL TABLE sales_ext_download ( identification_number INT, transaction_date TIMESTAMP, product_code VARCHAR(256), product_units INT, store_id INT, description VARCHAR(256) ) LOCATION 'kafka://zk1:2181,zk2:2181,zk3:2181/sales_out' FORMAT 'AVRO' CHUNK_SIZE 1000 -- запуск выгрузки данных из логической таблицы sales INSERT INTO sales_ext_download SELECT * FROM sales WHERE product_units > 2 ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%92%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%92%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%92%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%92%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"36": {
    "doc": "Дельта",
    "title": "Дельта",
    "content": "# Дельта _Дельта_ — целостная совокупность изменений в [логической базе данных](../Логическая_база_данных/Логическая_база_данных.md). Дельта включает все [операции записи](../Операция_записи/Операция_записи.md), выполненные между открытием и закрытием этой дельты, и имеет порядковый номер, уникальный в рамках логической базы данных. Нумерация дельт начинается с 0. Дельты упорядочены в порядке возрастания их номеров и формируют историю состояний данных логической БД. На рисунке ниже показана последовательность операций записи, выполненных в рамках дельт с номерами 0 и 1. В рамках дельты 0 выполнены операции записи с номерами 0-2, в рамках дельты 1 — операции записи с номерами 3-6. ![](Операции_в_дельте.svg) {: .figure-center} *Операции записи двух дельт* {: .figure-caption-center} Дельту можно [открыть](../../../Справочная_информация/Запросы_SQLplus/BEGIN_DELTA/BEGIN_DELTA.md), [закрыть](../../../Справочная_информация/Запросы_SQLplus/COMMIT_DELTA/COMMIT_DELTA.md) и [отменить](../../../Справочная_информация/Запросы_SQLplus/ROLLBACK_DELTA/ROLLBACK_DELTA.md). Дельта, которая была открыта и еще не была закрыта, содержит горячие записи и называется открытой или горячей. Для каждой логической базы одновременно может быть открыто не более одной дельты. Дельта, которая была закрыта (зафиксирована) содержит актуальные записи и называется закрытой. На рисунке ниже показана последовательность дельт, где дельта с номером 3 является открытой, а все предыдущие — закрытыми. ![](Типы_дельт.svg) {: .figure-center} *Открытая и закрытые дельты* {: .figure-caption-center} Для [загрузки данных](../../../Работа_с_системой/Загрузка_данных/Загрузка_данных.md) в логическую БД нужно открыть дельту, загрузить данные в требуемые логические таблицы, после чего сохранить изменения (закрыть дельту). В рамках открытой дельты можно выполнить произвольное число операций записи. **Примечание:** не допускается загрузка различных состояний одного и того же объекта в рамках одной дельты. Для загрузки обновленных данных объекта нужно закрыть открытую дельту, открыть новую дельту и загрузить необходимые изменения (см. пример на рисунке [ниже](#img_data_update)). На рисунке ниже показан пример обновления данных клиента, сменившего фамилию. Первоначальные данные клиента загружены в рамках дельты 0, а обновленные данные — в рамках дельты 1. ![](Обновление_данных.svg) {: .figure-center} *Обновление данных клиента, сменившего фамилию* {: .figure-caption-center} Если нужно вернуть состояние данных, которое предшествовало изменениям, выполненным в рамках открытой дельты, следует [откатить дельту](../../../Справочная_информация/Запросы_SQLplus/ROLLBACK_DELTA/ROLLBACK_DELTA.md). Откат дельты возможен только для открытой дельты, после закрытия дельты возврат к предыдущему состоянию недоступен. При запросе и выгрузке данных номер дельты можно использовать, чтобы указать момент или период, по состоянию на который запрашивается информация (см. директиву [FOR SYSTEM_TIME](../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md#sect_for_system_time) в разделе [SELECT](../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md)). ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%94%D0%B5%D0%BB%D1%8C%D1%82%D0%B0/%D0%94%D0%B5%D0%BB%D1%8C%D1%82%D0%B0.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%94%D0%B5%D0%BB%D1%8C%D1%82%D0%B0/%D0%94%D0%B5%D0%BB%D1%8C%D1%82%D0%B0.html"
  },"37": {
    "doc": "Другие функции",
    "title": "Другие функции",
    "content": "# Другие функции ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8/%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8/%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8.html"
  },"38": {
    "doc": "Загружаемые типы данных",
    "title": "Загружаемые типы данных",
    "content": "# Загружаемые типы данных Система поддерживает загрузку типов данных Avro, перечисленных в таблице ниже. Для каждого типа данных Avro указан соответствующий [логический тип данных](../Логические_типы_данных/Логические_типы_данных.md). Подробнее о типах данных Avro см. в [официальной документации](https://docs.oracle.com/database/nosql-12.1.3.0/GettingStartedGuide/avroschemas.html#avro-primitivedatatypes) Apache Avro. | Загружаемый тип данных Avro | Логический тип данных |:-|:- | boolean | BOOLEAN | string | VARCHAR (n) | long | BIGINT | double | DOUBLE | float | FLOAT | (int) date | DATE | (long) time-micros | TIME (precision) | (long) timestamp-micros | TIMESTAMP (precision) ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B6%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B6%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B6%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B6%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"39": {
    "doc": "Загрузка данных",
    "title": "Загрузка данных",
    "content": "# Загрузка данных Для загрузки данных нужен существующий топик Kafka. Если в брокере сообщений Kafka настроено автоматическое создание топиков, то дополнительные действия не требуются. Иначе необходимо создать топик, если он еще не создан. Подробнее о создании топиков см. в документации Kafka: * раздел [Quick Start](https://kafka.apache.org/documentation/#quickstart), * раздел [Adding and removing topics](https://kafka.apache.org/documentation/#basic_ops_add_topic). Чтобы загрузить данные из внешней информационной системы в [логическую таблицу](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md): 1. Загрузите данные из внешней информационной системы в топик Kafka. Данные должны иметь формат, описанный в разделе [Формат загрузки данных](../../Справочная_информация/Формат_загрузки_данных/Формат_загрузки_данных.md). 2. [Создайте](../../Справочная_информация/Запросы_SQLplus/CREATE_TABLE/CREATE_TABLE.md) [логическую таблицу](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md), если она еще не создана. 3. [Создайте](../../Справочная_информация/Запросы_SQLplus/CREATE_UPLOAD_EXTERNAL_TABLE/CREATE_UPLOAD_EXTERNAL_TABLE.md) [внешнюю таблицу](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) загрузки, если она еще не создана. 4. Выполните запрос [BEGIN DELTA](../../Справочная_информация/Запросы_SQLplus/BEGIN_DELTA/BEGIN_DELTA.md) на открытие [дельты](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md), если она еще не открыта. 5. Выполните запрос [INSERT INTO logical_table](../../Справочная_информация/Запросы_SQLplus/INSERT_INTO_logical_table/INSERT_INTO_logical_table.md) на загрузку данных из топика в логическую таблицу. В запросе нужно указать внешнюю таблицу загрузки, определяющую параметры загрузки. После успешного окончания загрузки данных система вернет ответ с пустым объектом ResultSet. 6. Если необходимо, загрузите другие данные, например в другие логические таблицы. В рамках одной открытой дельты можно выполнять произвольное количество запросов [INSERT INTO logical_table](../../Справочная_информация/Запросы_SQLplus/INSERT_INTO_logical_table/INSERT_INTO_logical_table.md), при этом не допускается загрузка различных состояний одного и того же объекта. 7. Выполните запрос [COMMIT DELTA](../../Справочная_информация/Запросы_SQLplus/COMMIT_DELTA/COMMIT_DELTA.md) для сохранения изменений и закрытия дельты. При успешном выполнении последовательности действий загруженные данные сохраняются в качестве актуальных, а предыдущая версия данных, если такая была, становится архивной. Подробнее о версионировании см. в разделе [Версионирование данных](Версионирование_данных/Версионирование_данных.md). Пока дельта не закрыта, все изменения данных, выполненные в рамках нее, можно отменить (см. [ROLLBACK DELTA](../../Справочная_информация/Запросы_SQLplus/ROLLBACK_DELTA/ROLLBACK_DELTA.md)). Созданные внешние таблицы загрузки можно использовать повторно или удалить. ## Пример ```sql -- выбор логической базы данных sales в качестве базы данных по умолчанию USE sales -- создание логической таблицы sales CREATE TABLE sales ( identification_number INT NOT NULL, transaction_date TIMESTAMP NOT NULL, product_code VARCHAR(256) NOT NULL, product_units INT NOT NULL, store_id INT NOT NULL, description VARCHAR(256), PRIMARY KEY (identification_number) ) DISTRIBUTED BY (identification_number) -- создание внешней таблицы загрузки CREATE UPLOAD EXTERNAL TABLE sales_ext_upload ( identification_number INT, transaction_date TIMESTAMP, product_code VARCHAR(256), product_units INT, store_id INT, description VARCHAR(256) ) LOCATION 'kafka://zk1:2181,zk2:2181,zk3:2181/sales' FORMAT 'AVRO' MESSAGE_LIMIT 1000 -- открытие новой (горячей) дельты BEGIN DELTA -- запуск загрузки данных в логическую таблицу sales INSERT INTO sales SELECT * FROM sales.sales_ext_upload -- закрытие дельты (фиксация изменений) COMMIT DELTA ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"40": {
    "doc": "Запрос данных",
    "title": "Запрос данных",
    "content": "# Запрос данных Система позволяет запрашивать небольшие объемы актуальных и архивных данных, а также изменений, выполненных в рамках указанных дельт. Возможные способы выборки данных описаны в секции [FOR SYSTEM_TIME](../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md#sect_for_system_time) раздела [SELECT](../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md). Чтобы запросить небольшой объем данных из [логических таблиц](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) и (или) [представлений](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md), выполните запрос [SELECT](../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md). Запросы на чтение данных обрабатываются в порядке, описанном в разделе [Порядок обработки запросов на чтение данных](../../Обзор_понятий_компонентов_и_связей/Связи_с_другими_системами_и_компонентами/Порядок_обработки_запросов_на_чтение_данных/Порядок_обработки_запросов_на_чтение_данных.md). При успешном выполнении запроса запрошенные данные возвращаются в ответе. **Примечание:** под небольшим объемом данных подразумевается результат, содержащий десятки строк. Для запроса большого объема данных следует использовать функцию [выгрузки данных](../Выгрузка_данных/Выгрузка_данных.md). На рисунке ниже показан пример запроса из логической таблицы `sales`, возвращающий одну строку. Так как секция `DATASOURCE_TYPE` не указана, система автоматически направляет запрос в СУБД, оптимальную для его исполнения (см. [Маршрутизация запросов к данным](Маршрутизация_запросов_к_данным/Маршрутизация_запросов_к_данным.md)). ![](Запрос_данных.png) {: .figure-center} *Запрос небольшого объема данных* {: .figure-caption-center} ## Пример ```sql -- выбор логической базы данных sales в качестве базы данных по умолчанию USE sales -- запрос данных из логической таблицы sales SELECT s.store_id, SUM(s.product_units) AS product_amount FROM sales AS s GROUP BY (s.store_id) ORDER BY product_amount DESC LIMIT 20 -- запрос данных из логического представления stores_by_sold_products SELECT sold.store_id, sold.product_amount FROM stores_by_sold_products AS sold ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"41": {
    "doc": "Запрос метаданных логической схемы",
    "title": "Запрос метаданных логической схемы",
    "content": "# Запрос метаданных логической схемы Чтобы запросить метаданные объектов [логической схемы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md), выполните запрос [SELECT FROM INFORMATION_SCHEMA](../../../Справочная_информация/Запросы_SQLplus/SELECT_FROM_INFORMATION_SCHEMA/SELECT_FROM_INFORMATION_SCHEMA.md) (см. примеры [ниже](#примеры)). Доступно получение информации о сущностях и их свойствах, перечисленных в разделе [Системные представления (INFORMATION_SCHEMA)](../../../Справочная_информация/Системные_представления_INFORMATION_SCHEMA/Системные_представления_INFORMATION_SCHEMA.md). ## Примеры Запрос списка всех [логических БД](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) [окружения](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Окружение/Окружение.md) с лексической сортировкой по возрастанию: ```sql SELECT schema_name FROM INFORMATION_SCHEMA.schemata ORDER BY schema_name ``` Запрос информации о логических сущностях логической БД `SALES`: ```sql SELECT * FROM INFORMATION_SCHEMA.tables WHERE table_schema = 'SALES' ``` Запрос списка имен, типов и столбцов логических сущностей окружения: ```sql SELECT TC.table_schema, TC.table_name, TT.table_type, TC.column_name FROM information_schema.columns AS TC JOIN information_schema.tables AS TT ON TC.table_schema = TT.table_schema and TC.table_name = TT.table_name ORDER BY TC.table_schema, TC.table_name ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81_%D0%BC%D0%B5%D1%82%D0%B0%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%81%D1%85%D0%B5%D0%BC%D1%8B/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81_%D0%BC%D0%B5%D1%82%D0%B0%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%81%D1%85%D0%B5%D0%BC%D1%8B.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81_%D0%BC%D0%B5%D1%82%D0%B0%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%81%D1%85%D0%B5%D0%BC%D1%8B/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81_%D0%BC%D0%B5%D1%82%D0%B0%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%81%D1%85%D0%B5%D0%BC%D1%8B.html"
  },"42": {
    "doc": "Запросы SQL+",
    "title": "Запросы SQL+",
    "content": "# Запросы SQL+ ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_SQLplus.html"
  },"43": {
    "doc": "Изменение логического представления",
    "title": "Изменение логического представления",
    "content": "# Изменение логического представления Чтобы изменить [логическое представление](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md) в [логической БД](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), выполните запрос [ALTER VIEW](../../../Справочная_информация/Запросы_SQLplus/ALTER_VIEW/ALTER_VIEW.md) или `CREATE OR REPLACE VIEW` (см. [CREATE VIEW](../../../Справочная_информация/Запросы_SQLplus/CREATE_VIEW/CREATE_VIEW.md)). При успешном выполнении запроса логическое представление изменит свой вид. ## Пример ```sql -- выбор sales как логической базы данных по умолчанию USE sales -- создание логического представления CREATE VIEW stores_by_sold_products AS SELECT store_id, SUM(product_units) AS product_amount FROM sales GROUP BY store_id ORDER BY product_amount DESC LIMIT 10 -- изменение логического представления ALTER VIEW stores_by_sold_products AS SELECT store_id, SUM(product_units) AS product_amount FROM sales GROUP BY store_id ORDER BY product_amount ASC LIMIT 20 -- пересоздание логического представления CREATE OR REPLACE VIEW stores_by_sold_products AS SELECT store_id, SUM(product_units) AS product_amount FROM sales GROUP BY store_id ORDER BY product_amount DESC LIMIT 30 ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F/%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F/%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F.html"
  },"44": {
    "doc": "Компоненты системы",
    "title": "Компоненты системы",
    "content": "# Компоненты системы Система состоит из следующих компонентов (см. рисунок [ниже](#img_components)): * JDBC-драйвер — размещается на стороне внешней информационной системы; предоставляет JDBC-интерфейс подключения к DTM и взаимодействует с сервисом исполнения запросов по REST API; * сервис исполнения запросов (DTM Core) — анализирует и исполняет SQL-запросы; предоставляет REST API для JDBC-драйвера и взаимодействует с сервисом мониторинга статусов Kafka по REST API; * сервис мониторинга статусов Kafka (DTM Status Monitor) — отслеживает состояние топиков брокера сообщений Kafka; предоставляет REST API для сервиса исполнения запросов. Версии используемых компонентов системы можно проверить с помощью запроса [CHECK_VERSIONS](../../Справочная_информация/Запросы_SQLplus/CHECK_VERSIONS/CHECK_VERSIONS.md). На рисунке ниже показана схема компонентов системы. ![](Компоненты_системы.svg) {: .figure-center} *Компоненты системы* {: .figure-caption-center} ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B.html"
  },"45": {
    "doc": "Конфигурация",
    "title": "Конфигурация",
    "content": "# Конфигурация Конфигурация системы задается в текстовом файле YAML-формата. Параметры конфигурации организованы в иерархическую структуру типа дерево. В разделе представлен примеры актуальных файлов конфигурации системы: [конфигурации сервиса исполнения запросов](#конфигурация-сервиса-исполнения-запросов) и [конфигурации сервиса мониторинга статусов Kafka](#конфигурация-сервиса-мониторинга-статусов-kafka). Перед каждым параметром указан комментарий, поясняющий назначение этого параметра. Для наглядности конфигурация сервиса исполнения запросов параметры разделена на отдельные секции. ## Конфигурация сервиса исполнения запросов ### Настройки журналирования ``` yaml # раздел настроек журналирования logging: # задание уровня важности сообщений, журналируемых в лог-файле level: io.arenadata.dtm.query.execution: TRACE ``` ### Настройки управления DTM ``` yaml # раздел настроек управления DTM management: # номер порта сервиса метрик server: port: ${DTM_METRICS_PORT:8080} # настройки конечных точек ADTM endpoints: # настройка генерации метрик со стороны ADTM enabled-by-default: ${DTM_METRICS_ENABLED:true} # настройка видимости метрик через веб-соединения web: exposure: # состав метрик, видимых через веб-соединения include: ${DTM_METRICS_SCOPE:info, health, requests} ``` ### Настройки сервиса исполнения запросов ``` yaml # раздел настроек сервиса исполнения запросов core: # настройки плагинов plugins: # список работающих плагинов к соответствующим СУБД active: ${CORE_PLUGINS_ACTIVE:ADG, ADB, ADQM} # настройки профилей приоритетности СУБД по категориям SQL-запросов category: mapping: # профиль для общих реляционных запросов RELATIONAL: ${DTM_CORE_PLUGINS_RELATIONAL:ADB, ADQM, ADG} # профиль для запросов аналитики ANALYTICAL: ${DTM_CORE_PLUGINS_ANALYTICAL:ADQM, ADB, ADG} # профиль для запросов ключ-значение DICTIONARY: ${DTM_CORE_PLUGINS_DICTIONARY:ADG, ADB, ADQM} # профиль для других категорий запросов UNDEFINED: ${DTM_CORE_PLUGINS_UNDEFINED:ADB, ADQM, ADG} # настройки сетевых подключений через HTTP-протокол http: # номер порта сервиса исполнения запросов port: ${DTM_CORE_HTTP_PORT:9090} # настройка режима оптимизации работы сокета TCP_NODELAY tcpNoDelay: ${DTM_CORE_HTTP_TCP_NO_DELAY:true} # настройка режима TCP FAST_OPEN tcpFastOpen: ${DTM_CORE_HTTP_TCP_FAST_OPEN:true} # настройка режима оптимизации работы сокета TCP_QUICKACK tcpQuickAck: ${DTM_CORE_HTTP_TCP_QUICK_ACK:true} # настройки окружения env: # имя окружения для формирования полных имен логических БД name: ${DTM_NAME:test} # настройки временной зоны settings: timeZone: ${CORE_TIME_ZONE:UTC} # настройки генерации метрики сервиса исполнения запросов metrics: isEnabled: ${DTM_CORE_METRICS_ENABLED:true} # настройки источника данных datasource: # настройки для EDML-операторов edml: # тип СУБД-источника (ADB, ADQM, ADG) sourceType: ${EDML_DATASOURCE:ADB} # количество записей, по умолчанию выгружаемых в одном сообщении топика Каfka defaultChunkSize: ${EDML_DEFAULT_CHUNK_SIZE:1000} # период проверки статуса плагина в миллисекундах pluginStatusCheckPeriodMs: ${EDML_STATUS_CHECK_PERIOD_MS:1000} # интервал времени ожидания (в миллисекундах) до тайм-аута при работе с первым смещением в топике Kafka firstOffsetTimeoutMs: ${EDML_FIRST_OFFSET_TIMEOUT_MS:15000} # интервал времени ожидания (в миллисекундах) до тайм-аута при ожидании смены смещения в топике Kafka changeOffsetTimeoutMs: ${EDML_CHANGE_OFFSET_TIMEOUT_MS:10000} # настройки Zookeeper zookeeper: # сетевой адрес хоста Zookeeper для служебной БД connection-string: ${ZOOKEEPER_DS_ADDRESS:10.92.3.47} # интервал времени ожидания (в миллисекундах) соединения с хостом Zookeeper для служебной БД до достижения тайм-аута connection-timeout-ms: ${ZOOKEEPER_DS_CONNECTION_TIMEOUT_MS:30000} # интервал времени бездействия (в миллисекундах) в сессии хоста Zookeeper для служебной БД до достижения тайм-аута session-timeout-ms: ${ZOOKEEPER_DS_SESSION_TIMEOUT_MS:86400000} # корневой путь к хосту Zookeeper для служебной БД chroot: ${ZOOKEEPER_DS_CHROOT:/adtm} # настройки взаимодействия сервиса исполнения запросов с брокером сообщений Kafka kafka: producer: property: # указание сериализатора строковых ключей key.serializer: org.apache.kafka.common.serialization.StringSerializer # указание сериализатора строковых значений value.serializer: org.apache.kafka.common.serialization.StringSerializer # настройка кластера Zookeeper для взаимодействия с брокером сообщений Kafka cluster: zookeeper: # сетевой адрес хоста Zookeeper для брокера сообщений Kafka connection-string: ${ZOOKEEPER_KAFKA_ADDRESS:10.92.3.47} # интервал времени ожидания (в миллисекундах) соединения с хостом Zookeeper для брокера сообщений Kafka до достижения тайм-аута connection-timeout-ms: ${ZOOKEEPER_KAFKA_CONNECTION_TIMEOUT_MS:30000} # интервал времени бездействия (в миллисекундах) в сессии хоста Zookeeper для брокера сообщений Kafka до достижения тайм-аута session-timeout-ms: ${ZOOKEEPER_KAFKA_SESSION_TIMEOUT_MS:86400000} # корневой путь к хосту Zookeeper для брокера сообщений Kafka chroot: ${ZOOKEEPER_KAFKA_CHROOT:} # настройки администратора Kafka admin: # интервал времени ожидания (в миллисекундах) входного потока данных для брокера сообщений Kafka до достижения тайм-аута inputStreamTimeoutMs: ${KAFKA_INPUT_STREAM_TIMEOUT_MS:2000} # настройки статусов публикации событий брокером сообщений Kafka status.event.publish: # разрешение на публикацию событий enabled: ${KAFKA_STATUS_EVENT_ENABLED:false} # наименование топика Kafka, в который публикуются события topic: ${KAFKA_STATUS_EVENT_TOPIC:status.event} # настройки подключения к сервису мониторинга статусов Kafka statusMonitor: # сетевой адрес и путь для получения информации о статусе сервиса statusUrl: ${STATUS_MONITOR_URL:http://127.0.0.1:9095/status} # сетевой адрес и путь для получения информации о версии сервиса versionUrl: ${STATUS_MONITOR_VERSION_URL:http://127.0.0.1:9095/versions} # настройки при использовании фреймворка vertx vertx: pool: # максимальный объем пула задач в сервисе исполнения запросов task-pool: ${DTM_CORE_TASK_POOL_SIZE:10} # интервал времени завершения задачи, выполняемой в сервисе исполнения запросов task-timeout: ${DTM_CORE_TASK_TIMEOUT:86400000} # настройки кэширования запросов cache: # начальная емкость кэша initialCapacity: ${CACHE_INITIAL_CAPACITY:100000} # максимальный размер кэша maximumSize: ${CACHE_MAXIMUM_SIZE:100000} # время (в минутах) устаревания кэша после последнего момента обращения к нему expireAfterAccessMinutes: ${CACHE_EXPIRE_AFTER_ACCESS_MINUTES:99960} ``` ### Настройки СУБД ADB ``` yaml # настройка СУБД ADB adb: # настройка источника данных СУБД ADB datasource: # имя пользователя/логин для авторизации в СУБД ADB user: ${ADB_USERNAME:dtm} # пароль для авторизации в СУБД ADB password: ${ADB_PASS:dtm} # сетевой адрес хоста с СУБД ADB host: ${ADB_HOST:10.92.3.105} # сетевой адрес порта на хосте с СУБД ADB port: ${ADB_PORT:5432} # максимальный размер пула подключений к СУБД ADB maxSize: ${ADB_MAX_POOL_SIZE:20} # максимальный размер результата, возвращаемого по FETCH-запросу к СУБД ADB fetchSize: ${ADB_FETCH_SIZE:1000} # настройки механизма загрузки данных в СУБД ADB mppw: # наименование консьюмер-группы СУБД ADB для взаимодействия с брокером сообщений Kafka consumerGroup: ${ADB_LOAD_GROUP:adb-emulator-load-adb} # максимальный размер пула подключений к СУБД ADB для операций загрузки poolSize: ${ADB_MPPW_POOL_SIZE:2} # значение тайм-аута ожидания (в миллисекундах) для остановки загрузки stopTimeoutMs: ${ADB_MPPW_STOP_TIMEOUT_MS:86400000} # предельное количество сообщений для операции загрузки в СУБД ADB defaultMessageLimit: ${ADB_MPPW_DEFAULT_MESSAGE_LIMIT:100} # значение тайм-аута ожидания (в миллисекундах) для FDW-коннектора ADB fdwTimeoutMs: ${ADB_MPPW_FDW_TIMEOUT_MS:1000} # признак использования исторических таблиц with-history-table: ${ADB_WITH_HISTORY_TABLE:false} ``` ### Настройки СУБД ADG ``` yaml # настройка СУБД ADG adg: tarantool: db: # сетевой адрес хоста с СУБД ADG host: ${TARANTOOL_DB_HOST:10.92.3.120} # сетевой адрес порта на хосте с СУБД ADG port: ${TARANTOOL_DB_PORT:3306} # имя пользователя/логин для авторизации в СУБД ADG user: ${TARANTOOL_DB_USER:admin} # пароль для авторизации в СУБД ADG password: ${TARANTOOL_DB_PASS:memstorage-cluster-cookie} # максимальный интервал времени ожидания выполнения операции СУБД ADG до тайм-аута operationTimeout: ${TARANTOOL_DB_OPER_TIMEOUT:60000} # максимальное количество повторных попыток выполнения операции retryCount: ${TARANTOOL_DB_RETRY_COUNT:0} # движок СУБД ADG engine: ${TARANTOOL_DEFAULT_ENGINE:MEMTX} # настройки картриджа Tatantool cartridge: # сетевой путь и порт к картриджу Tarantool url: ${TARANTOOL_CATRIDGE_URL:http://10.92.3.120:8086} # настройки механизма загрузки данных mppw: # наименование консьюмер-группы СУБД ADG для взаимодействия с брокером сообщений Kafka consumerGroup: ${ADG_CONSUMER_GROUP:tarantool-group-csv} kafka: # максимальное количество сообщений в топике Kafka на раздел СУБД ADG maxNumberOfMessagesPerPartition: ${ADG_MAX_MSG_PER_PARTITION:200} # время простоя (в секундах) callback-функции callbackFunctionSecIdle: ${ADG_CB_FUNC_IDLE:100} # настройки отката операции rollback: # размер пакета операций при откате eraseOperationBatchSize: ${ADG_ROLLBACK_OPERATION_BATCH_SIZE:300} # настройки отказоустойчивости ADG по паттерну circuitbreaker circuitbreaker: # максимальное количество отказов ADG maxFailures: ${ADG_CIRCUIT_BREAKER_MAX_FAILURES:5} # интервал времени фиксации отказа при пропадании отклика ADG timeout: ${ADG_CIRCUIT_BREAKER_TIMEOUT:30000} # использование паттерна fallback при отказе fallbackOnFailure: ${ADG_CIRCUIT_BREAKER_FALLBACK_ON_FAILURE:false} # интервал времени до сброса по паттерну timeout resetTimeout: ${ADG_CIRCUIT_BREAKER_RESET_TIMEOUT:10000} # настройки для подключений веб-клиентов web-client: # максимальный размер пула подключений веб-клиентов к СУБД ADG max-pool-size: ${ADG_WEB_CLIENT_MAX_POOL_SIZE:100} ``` ### Настройки СУБД ADQM ``` yaml # настройки СУБД ADQM adqm: # настройка источника данных СУБД ADQM datasource: # наименование СУБД ADQM database: ${ADQM_DB_NAME:upload} # имя пользователя/логин для авторизации в СУБД ADQM user: ${ADQM_USERNAME:} # пароль для авторизации в СУБД ADQM password: ${ADQM_PASS:} # сетевой адрес хоста с СУБД ADQM и номер порта на хосте hosts: ${ADQM_HOSTS:10.92.3.30:8123} # интервал времени ожидания отклика соединения с СУБД ADQM до тайм-аута socketTimeout: ${ADQM_SOCKET_TIMEOUT:30000} # интервал времени ожидания завершения обмена данными с СУБД ADQM до тайм-аута dataTransferTimeout: ${ADQM_DATA_TRANSFER_TIMEOUT:10000} # настройки DDL-операторов ddl: # наименование кластера СУБД ADQM cluster: ${ADQM_CLUSTER:test_arenadata} # настройки механизма выгрузки данных из ADQM mppr: # сетевой адрес и путь для запросов на выгрузку данных loadingUrl: ${ADQM_MPPR_CONNECTOR_URL:http://10.92.3.14:8086/query} # сетевой адрес и путь для получения информации о версии коннектора versionUrl: ${ADQM_MPPR_CONNECTOR_VERSION_URL:http://10.92.3.14:8086/versions} # настройки механизма загрузки данных ADQM mppw: # наименование консьюмер-группы СУБД ADQM для загрузки данных в СУБД ADQM # не используется consumerGroup: ${ADQM_CONSUMER_GROUP:adqm} # сетевой адрес брокера сообщений Kafka kafkaBrokers: ${ADQM_BROKERS:10.92.3.31:9092} # тип интерфейса для загрузки данных в СУБД ADQM loadType: ${ADQM_MPPW_LOAD_TYPE:REST} # сетевой адрес и путь к REST-интерфейсу для загрузки новых данных в СУБД ADQM restStartLoadUrl: ${ADQM_REST_START_LOAD_URL:http://10.92.3.86:8090/newdata/adqm/start} # сетевой адрес и путь к REST-интерфейсу для остановки загрузки данных в СУБД ADQM restStopLoadUrl: ${ADQM_REST_STOP_LOAD_URL:http://10.92.3.86:8090/newdata/adqm/stop} # сетевой адрес и путь для получения информации о версии коннектора versionUrl: ${ADQM_MPPW_CONNECTOR_VERSION_URL:http://10.92.3.86:8090/versions} # наименование коньсюмер-группы для загрузки данных в СУБД ADQM через REST API restLoadConsumerGroup: ${ADQM_REST_LOAD_GROUP:adb-emulator-load-adqm} # настройки для подключений веб-клиентов web-client: # максимальный размер пула подключений веб-клиентов к СУБД ADQM max-pool-size: ${ADQM_WEB_CLIENT_MAX_POOL_SIZE:100} ``` ## Конфигурация сервиса мониторинга статусов Kafka ``` yaml # настройки cервиса мониторинга статусов Kafka monitor: # список адресов брокеров сообщений Kafka brokersList: ${STATUS_MONITOR_BROKERS:10.92.3.31:9092} # количество потребителей (консьюмеров) cервиса мониторинга Kafka consumersCount: ${STATUS_MONITOR_CONSUMERS:8} ``` ",
    "url": "/%D0%AD%D0%BA%D1%81%D0%BF%D0%BB%D1%83%D0%B0%D1%82%D0%B0%D1%86%D0%B8%D1%8F/%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F/%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F.html",
    "relUrl": "/%D0%AD%D0%BA%D1%81%D0%BF%D0%BB%D1%83%D0%B0%D1%82%D0%B0%D1%86%D0%B8%D1%8F/%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F/%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F.html"
  },"46": {
    "doc": "Логическая база данных",
    "title": "Логическая база данных",
    "content": "# Логическая база данных _Логическая база данных (логическая БД)_ — совокупность логических сущностей ([логических таблиц](../Логическая_таблица/Логическая_таблица.md), [логических представлений](../Логическое_представление/Логическое_представление.md) и [внешних таблиц](../Внешняя_таблица/Внешняя_таблица.md)), сгруппированных по какому-либо принципу, например по направлению анализа. ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D0%B1%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D0%B1%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D0%B1%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D0%B1%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"47": {
    "doc": "Логическая схема данных",
    "title": "Логическая схема данных",
    "content": "# Логическая схема данных _Логическая схема данных_ — внешнее представление структуры данных [окружения](../Окружение/Окружение.md), единое для всех [поддерживаемых СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../Хранилище_данных/Хранилище_данных.md). Логическая схема данных представляет собой иерархию следующих объектов: * [логических баз данных](../Логическая_база_данных/Логическая_база_данных.md), * [логических таблиц](../Логическая_таблица/Логическая_таблица.md), * [логических представлений](../Логическое_представление/Логическое_представление.md), * [внешних таблиц](../Внешняя_таблица/Внешняя_таблица.md). Логическая схема данных хранится в [сервисной базе данных](../Сервисная_база_данных/Сервисная_база_данных.md) системы. На рисунке ниже показана иерархия объектов логической схемы данных. ![](Логическая_схема_данных.svg) {: .figure-center} *Объекты логической схемы и их связи с объектами физической схемы* {: .figure-caption-center} Внешняя информационная система (пользователь) отправляет системе запросы к данным, сформулированные в терминах логической схемы. Система разбирает полученные запросы, модифицирует их нужным образом и перенаправляет к [физическим таблицам](../Физическая_таблица/Физическая_таблица.md) хранилища данных. В зависимости от момента времени, указанного в запросе, система обращается к актуальным или архивным данным. Такая модель взаимодействия позволяет работать с различными версиями данных, которые хранятся в различных СУБД хранилища, в едином формате. **Связанные разделы:** * [Управление схемой данных](../../../Работа_с_системой/Управление_схемой_данных/Управление_схемой_данных.md). ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%81%D1%85%D0%B5%D0%BC%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%81%D1%85%D0%B5%D0%BC%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%81%D1%85%D0%B5%D0%BC%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%81%D1%85%D0%B5%D0%BC%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"48": {
    "doc": "Логическая таблица",
    "title": "Логическая таблица",
    "content": "# Логическая таблица _Логическая таблица_ — структурированная совокупность записей о состояниях объектов одного типа, например счетов или контрагентов. Логическая таблица не хранит сами данные, а предоставляет доступ к данным соответствующих [физических таблиц](../Физическая_таблица/Физическая_таблица.md) [хранилища](../Хранилище_данных/Хранилище_данных.md). В отличие от реляционной таблицы, объекты которой обычно хранятся в актуальном (текущем) состоянии, логическая таблица предоставляет информацию обо всех исторических состояниях объектов: новых, актуальных и архивных. Например, данные одного клиента могут иметь нескольких версий в логической таблице `clients`: * архивная запись с номером телефона `phone_1` и адресом `address_1`, * актуальная запись с номером телефона `phone_2` и адресом `address_1` (клиент сменил номер телефона), * горячая (новая) запись с номером телефона `phone_2` и адресом `address_2` (клиент сменил адрес; запись загружена, но еще не зафиксирована). На рисунке ниже показана схема связей логической таблицы с ее физическими представлениями — физическими таблицами хранилища данных. ![](Логическая_таблица.svg) {: .figure-center} *Связи логической таблицы с физическими таблицами* {: .figure-caption-center} Работа с логическими таблицами напоминает работу с реляционными таблицами. Логические таблицы можно [создавать](../../../Работа_с_системой/Управление_схемой_данных/Создание_логической_таблицы/Создание_логической_таблицы.md) и [удалять](../../../Работа_с_системой/Управление_схемой_данных/Удаление_логической_таблицы/Удаление_логической_таблицы.md). Данные логической таблицы можно [загружать](../../../Работа_с_системой/Загрузка_данных/Загрузка_данных.md), [запрашивать](../../../Работа_с_системой/Запрос_данных/Запрос_данных.md) и [выгружать](../../../Работа_с_системой/Выгрузка_данных/Выгрузка_данных.md). При обращении к данным логической таблицы можно указать [момент времени](../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md#sect_for_system_time), по состоянию на который запрашиваются данные. Если момент времени не указан, система возвращает данные, актуальные на момент обработки запроса. Таким образом, можно получать данные из логической таблицы по состоянию на любой момент времени — независимо от того, являются они горячими (новыми), актуальными или архивными. При создании логической таблицы система автоматически создает и далее поддерживает [набор физических таблиц](../Физическая_схема_данных/Физическая_схема_данных.md) для хранения данных. ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0.html"
  },"49": {
    "doc": "Логические типы данных",
    "title": "Логические типы данных",
    "content": "# Логические типы данных Система поддерживает логические типы данных, описанные в таблице ниже. Для каждого из них в таблице указаны соответствующие физические типы данных [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md). **Примечание:** при работе с логическими базами данных и их объектами нужно указывать логические типы данных. Физические типы данных описаны в справочных целях. | Логический тип | Описание | Тип данных ADB | Тип данных ADG | Тип данных ADQM |:-|:-|:-|:-|:- | BOOLEAN | Логический (булевый) тип | boolean | boolean | UInt8 | VARCHAR (n) | Строка ограниченной длины (n символов) | varchar (n) | string | String | LINK | Строка неограниченной длины. Предназначена для ссылочных полей | varchar | string | String | CHAR (n) | Строка ограниченной длины (n символов) | varchar (n) | string | String | UUID | Строка ограниченной длины (36 символов) | varchar (36) | string | String | BIGINT | Целое число фиксированной длины со знаком, находящееся в диапазоне от -9223372036854775808 до 9223372036854775807 | bigint (int8) | integer | Int64 | INT | Целое число фиксированной длины со знаком, находящееся в диапазоне от -9223372036854775808 до 9223372036854775807 | bigint (int8) | integer | Int64 | INT32 | Целое число фиксированной длины со знаком, находящееся в диапазоне от -2147483648 до 2147483647 | integer (int4) | integer | Int32 | DOUBLE | Число с плавающей запятой с двойной точностью | double (float8) | number | Float64 | FLOAT | Число с плавающей запятой | real (float4) | number | Float32 | DATE | Дата (без времени суток) | date | integer (знаковое число дней относительно даты 1970-01-01) | Int64 (знаковое число дней относительно даты 1970-01-01) | TIME, TIME (precision) | Время (без даты). Заданная точность (precision) влияет только на отображение времени. Возможные значения: от 0 до 6. Значение 0 соответствует секундам, значение 6 — микросекундам. Значение по умолчанию — 6 | time (6) | integer (знаковое число микросекунд, начиная с 00:00:00.000000) | Int64 (знаковое число микросекунд, начиная с 00:00:00.000000) | TIMESTAMP, TIMESTAMP (precision) | Дата и время. Заданная точность (precision) влияет только на отображение даты и времени. Возможные значения: от 0 до 6. Значение 0 соответствует секундам, значение 6 — микросекундам. Значение по умолчанию — 6 | timestamp (6) | integer (знаковое число микросекунд относительно 1970-01-01 00:00:00) | Int64 (знаковое число микросекунд относительно 1970-01-01 00:00:00) ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"50": {
    "doc": "Логическое представление",
    "title": "Логическое представление",
    "content": "# Логическое представление _Логическое представление_ — сохраненный запрос к данным одной или нескольких [логических таблиц](../Логическая_таблица/Логическая_таблица.md), который имеет имя и может использоваться как источник данных в других запросах. Примером логического представления является список контрагентов, объединенный с информацией о благонадежности контрагентов и их контактами. Работа с логическими представлениями напоминает работу с реляционными представлениями. Логические представления можно [создавать](../../../Работа_с_системой/Управление_схемой_данных/Создание_логического_представления/Создание_логического_представления.md), [изменять](../../../Работа_с_системой/Управление_схемой_данных/Изменение_логического_представления/Изменение_логического_представления.md) и [удалять](../../../Работа_с_системой/Управление_схемой_данных/Удаление_логического_представления/Удаление_логического_представления.md). Данные логического представления можно [запрашивать](../../../Работа_с_системой/Запрос_данных/Запрос_данных.md) и [выгружать](../../../Работа_с_системой/Выгрузка_данных/Выгрузка_данных.md). Логическое представление проецирует данные связанных логических таблиц и не отражается в [хранилище](../Хранилище_данных/Хранилище_данных.md). Загрузка данных в логические представления невозможна. ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5.html"
  },"51": {
    "doc": "Маршрутизация запросов к данных",
    "title": "Маршрутизация запросов к данных",
    "content": "# Маршрутизация запросов к данных Запросы к данным маршрутизируются следующим образом: * если в запросе указана [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md) (см. [DATASOURCE_TYPE](../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md#param_datasource_type)), в которой должен быть выполнен запрос, запрос направляется в указанную СУБД; * иначе запрос маршрутизируется автоматически на основе его категории в соответствии с [конфигурацией](../../../Эксплуатация/Конфигурация/Конфигурация.md) системы. По умолчанию в конфигурации определен следующий порядок выбора СУБД для исполнения запросов: * реляционные запросы — запросы с операторами JOIN и (или) подзапросами — направляются в ADB; * запросы агрегации и группировки данных направляются в ADQM; * запросы точечного чтения по ключу направляются в ADG; * запросы, не соответствующие ни одной из предыдущих категорий, направляются в ADB. Категория запроса определяется в указанном выше порядке. Например, если запрос содержит оператор JOIN, то он попадает в первую категорию независимо от наличия агрегации, группировки и чтения по ключу. Примеры запросов каждой из категорий см. [ниже](#примеры-запросов-различных-категорий). Указанный порядок выбора СУБД эффективно использует возможности каждой из СУБД хранилища, однако при необходимости его можно изменить в конфигурации системы. **Примечание:** наиболее полный синтаксис запросов доступен в ADB. ADG и ADQM имеют ограничения на выполнение запросов, вызванные особенностями этих СУБД (см. [Поддержка SQL](../../../Справочная_информация/Поддержка_SQL/Поддержка_SQL.md)). ## Примеры запросов различных категорий Реляционный запрос: ```sql SELECT * FROM sales.sales AS s JOIN sales.stores AS st ON s.store_id = st.identification_number ``` Реляционный запрос с агрегацией, группировкой и чтением по ключу (`st.identification_number`): ```sql SELECT st.identification_number, st.category, SUM(s.product_units) AS product_amount FROM sales.stores AS st JOIN sales.sales AS s ON st.identification_number = s.store_id WHERE st.identification_number 10004 GROUP BY st.identification_number, st.category ORDER BY product_amount DESC ``` Запрос агрегации и группировки: ```sql SELECT s.product_code, SUM(s.product_units) AS product_amount FROM sales.sales AS s GROUP BY s.product_code ORDER BY product_amount ASC ``` Запрос агрегации и группировки с чтением по ключу (`s.identification_number`): ```sql SELECT s.product_code, SUM(s.product_units) AS product_amount FROM sales.sales AS s WHERE s.identification_number > 20000 GROUP BY s.product_code ``` Запрос чтения по ключу: ```sql SELECT * FROM sales.sales as s WHERE s.identification_number BETWEEN 1001 AND 2000 ``` Запрос неопределенной категории: ```sql SELECT * FROM sales.sales AS s WHERE s.product_units > 2 ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9C%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BA_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC/%D0%9C%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BA_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9C%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BA_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC/%D0%9C%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BA_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC.html"
  },"52": {
    "doc": "Минимальные системные требования",
    "title": "Минимальные системные требования",
    "content": "# Минимальные системные требования Система предъявляет следующие минимальные требования: * аппаратные требования: * ядро системы: 4 CPU, 16 RAM, 20 HDD; * сервис мониторинга статусов Kafka: 2 CPU, 8 RAM, 20 HDD; * программные требования: * ADB версии 6.15.0; * ADQM версии 20.4.4.18; * ADG версии 2.5.3; * ADS: * ADS версии 1.5; * Kafka версии 2.4; * Zookeeper версии 3.5.6. Компоненты, с которыми работает система, предъявляют минимальные требования, перечисленные в таблице ниже. | Компонент | Системные требования |:-|:- | ADB | ADQM | ADG (Tarantool) | Kafka | Zookeeper | ",
    "url": "/%D0%AD%D0%BA%D1%81%D0%BF%D0%BB%D1%83%D0%B0%D1%82%D0%B0%D1%86%D0%B8%D1%8F/%D0%9C%D0%B8%D0%BD%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F/%D0%9C%D0%B8%D0%BD%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F.html",
    "relUrl": "/%D0%AD%D0%BA%D1%81%D0%BF%D0%BB%D1%83%D0%B0%D1%82%D0%B0%D1%86%D0%B8%D1%8F/%D0%9C%D0%B8%D0%BD%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F/%D0%9C%D0%B8%D0%BD%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F.html"
  },"53": {
    "doc": "Обзор понятий, компонентов и связей",
    "title": "Обзор понятий, компонентов и связей",
    "content": "# Обзор понятий, компонентов и связей ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9.html"
  },"54": {
    "doc": "Окружение",
    "title": "Окружение",
    "content": "# Окружение _Окружение_ — совокупность [логических баз данных](../Логическая_база_данных/Логическая_база_данных.md), доступных при работе с системой. Инсталляция системы работает с окружением, заданным в ее [конфигурации](../../../Эксплуатация/Конфигурация/Конфигурация.md). Допустимо создавать несколько окружений для одного набора кластеров СУБД и при необходимости перенастраивать инсталляцию системы на другое окружение. Попеременное использование независимых окружений может быть полезно, например, в случае разделения различных тестовых сред. На рисунке ниже показан пример инсталляции системы с тремя окружениями, где в настоящий момент внешняя информационная система работает с окружением test2. ![](Окружение.svg) {: .figure-center} *Инсталляция системы с тремя окружениями* {: .figure-caption-center} ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9E%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9E%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9E%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9E%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5.html"
  },"55": {
    "doc": "Операция записи",
    "title": "Операция записи",
    "content": "# Операция записи _Операция записи_ — операция загрузки нового состояния объектов из внешнего источника в [логическую таблицу](../Логическая_таблица/Логическая_таблица.md). В рамках [дельты](../Дельта/Дельта.md) можно выполнить произвольное количество операций записи. Каждая операция записи имеет порядковый номер, уникальный среди всех операций записи в логической базе данных. Нумерация начинается с 0. Номера операций записи используются в [физических таблицах](../Физическая_таблица/Физическая_таблица.md) для обозначения границ периода \\[sys\\_from, sys\\_to\\], в котором запись была актуальна. На рисунке ниже показан пример с тремя операциями записи (0, 1, 2) в двух логических таблицах: `clients` и `sales`. В этом примере операции 0 и 2 выполнены по отдельности, однако их изменения могли быть загружены в таблицу `clients` в рамках одной операции записи. ![](Операция_записи.svg) {: .figure-center} *Операции записи в двух логических таблицах* {: .figure-caption-center} ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8.html"
  },"56": {
    "doc": "Определение логической БД по умолчанию",
    "title": "Определение логической БД по умолчанию",
    "content": "# Определение логической БД по умолчанию [Логическую базу данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) можно определить как используемую по умолчанию. Если логическая база данных по умолчанию определена, система использует ее имя всякий раз, когда в запросах явно не указана логическая БД. Логическую базу данных по умолчанию **необходимо** определить перед выполнением запросов, предназначенных для управления [дельтой](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md) и получения информации о ней. Это действие также можно выполнить перед другими запросами, что позволит не указывать имя логической БД перед именами логических сущностей в запросах к одной и той же логической базе данных. Чтобы определить логическую базу данных по умолчанию, используйте любой из способов: * Укажите логическую базу данных в настройках JDBC-подключения к системе (см. рисунок [ниже](#img_connection_settings)). Логическая база данных указывается последним параметром адресной строки (например, `jdbc:adtm://10.92.3.3:9092/sales`, где `sales` — имя логической базы данных). Логическая база, указанная таким образом, используется по умолчанию до наступления первого из следующих событий: переключение на другую логическую БД с помощью запроса [USE](../../../Справочная_информация/Запросы_SQLplus/USE/USE.md) или изменение настроек JDBC-подключения. * Выполните запрос [USE](../../../Справочная_информация/Запросы_SQLplus/USE/USE.md). Логическая база, указанная таким образом, используется по умолчанию до наступления первого из следующих событий: переключение на другую логическую БД с помощью запроса [USE](../../../Справочная_информация/Запросы_SQLplus/USE/USE.md) или закрытие соединения с системой. На рисунке ниже показан пример настройки параметров JDBC-подключения в SQL-клиенте, где логическая БД `sales` указана как используемая по умолчанию. ![](Настройки_подключения.png){:height=\"50%\" width=\"50%\"} {: .figure-center} *Параметры JDBC-драйвера с указанной логической БД по умолчанию* {: .figure-caption-center} ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8/%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%91%D0%94_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E/%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%91%D0%94_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8/%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%91%D0%94_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E/%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%91%D0%94_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E.html"
  },"57": {
    "doc": "Основные понятия",
    "title": "Основные понятия",
    "content": "Основные понятия ===================== ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F.html"
  },"58": {
    "doc": "Поддерживаемые СУБД хранилища",
    "title": "Поддерживаемые СУБД хранилища",
    "content": "# Поддерживаемые СУБД хранилища Система поддерживает работу со следующими СУБД [хранилища](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md): * Arenadata DB (ADB) — СУБД с массивно-параллельной архитектурой (Massive parallel processing, MPP), построенная на основе Greenplum; * Arenadata QuickMarts (ADQM) — кластерная колоночная СУБД на основе Yandex ClickHouse; * Arenadata Grid (ADG) — система распределенных вычислений в оперативной памяти, построенная на основе Tarantool. Система позволяет работать с перечисленными СУБД одинаковым образом, используя единый синтаксис [запросов SQL+](../../Справочная_информация/Запросы_SQLplus/Запросы_SQLplus.md) и единую [логическую схему данных](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md). ",
    "url": "/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D0%A1%D0%A3%D0%91%D0%94_%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B0/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D0%A1%D0%A3%D0%91%D0%94_%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B0.html",
    "relUrl": "/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D0%A1%D0%A3%D0%91%D0%94_%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B0/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D0%A1%D0%A3%D0%91%D0%94_%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B0.html"
  },"59": {
    "doc": "Поддерживаемые типы данных",
    "title": "Поддерживаемые типы данных",
    "content": "# Поддерживаемые типы данных В разделе описаны следующие типы данных: * логические типы данных системы и соответствующие им физические типы данных СУБД хранилища (см. [Логические типы данных](Логические_типы_данных/Логические_типы_данных.md)); * загружаемые типы данных Avro и соответствующие им логические типы данных (см. [Загружаемые типы данных](Загружаемые_типы_данных/Загружаемые_типы_данных.md)); * логические типы данных и соответствующие им выгружаемые типы данных Avro (см. [Выгружаемые типы данных](Выгружаемые_типы_данных/Выгружаемые_типы_данных.md)). ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"60": {
    "doc": "Поддержка SQL",
    "title": "Поддержка SQL",
    "content": "# Поддержка SQL В [SELECT](../Запросы_SQLplus/SELECT/SELECT.md)-запросах к данным можно использовать функции, описанные в таблице ниже. [СУБД](../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md) имеют ограничения на использование некоторых функций в запросах, вызванные особенностями этих СУБД. Наиболее полный синтаксис запросов доступен в ADB. | Функция | Доступна в ADB | Доступна в ADQM | Доступна в ADG |:-|:-:|:-:|:-: | ABS | + | + | + | ACOS | + | + | − | ASIN | + | + | − | ATAN | + | + | − | ATAN2 | + | − | − | AVG | − | − | − | BIT_AND | + | − | − | BIT_OR | + | − | − | CASE | + | + | + | CAST | + | + | + | CBRT | + | − | − | CEIL | +аргумент FLOAT | + | − | CEILING | +аргумент FLOAT | + | − | CHAR | − | − | − | COALESCE | + | + | + | COS | + | + | − | COUNT | + | + | + | CROSS JOIN | + | − | + | DEGREES | + | − | − | EXCEPT | − | − | − | EXP | + | + | − | FLOOR | +аргумент FLOAT | + | − | FULL JOIN | + | − | − | GREATEST | − | − | − | HEX | − | − | − | IFNULL | − | − | − | INTERSECT | − | − | − | JOIN для трех таблиц | + | − | + | JOIN с подзапросом | + | − | + | LEAST | − | − | − | LENGTH | − | − | − | LIKELY | − | − | − | LN | + | + | − | LOG | − | − | − | LOWER | + | + | + | MAX | + | + | + | MIN | + | + | + | MOD | + | − | − | NULLIF | + | + | + | OCTET_LENGTH | − | − | − | PI | − | − | − | POSITION | + | − | − | POWER | + | + | − | PRINTF | − | − | − | QUOTE | − | − | − | RADIANS | + | − | − | RANDOM | − | − | − | REPLACE | + | + | + | RIGHT JOIN | + | + | − | ROUND | +аргумент FLOAT | + | − | SIGN | +аргумент FLOAT | − | − | SIN | + | + | − | SQRT | + | + | − | SUBSTRING | + | + | − | SUM | + | + | + | TAN | + | + | − | TRIM | + | + | + | TRUNC | − | − | − | TYPEOF | − | − | − | UNION | − | − | − | UPPER | + | + | + ## Примеры неподдерживаемых запросов ### AVG ```sql SELECT AVG(product_units) FROM sales.sales ``` ### CROSS JOIN ```sql SELECT * FROM sales.sales AS s CROSS JOIN sales.stores AS st ORDER BY s.store_id, st.category LIMIT 5 DATASOURCE_TYPE = 'ADQM' ``` ### FULL JOIN ```sql SELECT * FROM sales.sales AS s FULL JOIN sales.stores AS st ON s.store_id = st.identification_number ORDER BY s.store_id LIMIT 5 DATASOURCE_TYPE = 'ADG' ``` ### JOIN для трех таблиц ```sql SELECT * FROM demo.territories AS t LEFT JOIN demo.employee_territories AS et ON t.territory_id = et.territory_id LEFT JOIN demo.employees AS e ON t.territory_id = e.territory_id WHERE e.last_name is NOT NULL ORDER BY t.territory_id DATASOURCE_TYPE = 'ADQM' ``` ### JOIN с подзапросом ```sql SELECT * FROM sales.sales AS s INNER JOIN (SELECT * FROM sales.stores) AS st ON s.store_id = st.identification_number ORDER BY s.store_id DATASOURCE_TYPE = 'ADQM' ``` ### RIGHT JOIN ```sql SELECT * FROM sales.sales AS s RIGHT JOIN sales.stores AS st ON s.store_id = st.identification_number ORDER BY st.identification_number LIMIT 5 DATASOURCE_TYPE = 'ADG' ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_SQL/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_SQL.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_SQL/%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_SQL.html"
  },"61": {
    "doc": "Подключение",
    "title": "Подключение",
    "content": "# Подключение Чтобы начать работать с системой, нужно подключиться к системе. Доступны следующие способы подключения: * [с помощью SQL-клиента](Подключение_с_помощью_SQL-клиента/Подключение_с_помощью_SQL-клиента.md), например DBeaver или DataGrip; * [с помощью программного подключения](Программное_подключение/Программное_подключение.md). ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5.html"
  },"62": {
    "doc": "Подключение с помощью SQL-клиента",
    "title": "Подключение с помощью SQL-клиента",
    "content": "# Подключение с помощью SQL-клиента Перед настройкой подключения загрузите скомпилированный файл драйвера с именем `dtm-jdbc-.jar` в вашу файловую систему. Чтобы настроить подключение к системе с помощью SQL-клиента: 1. Откройте меню, отвечающее за добавление новых JDBC-драйверов. В SQL-клиенте DBeaver это меню __Driver Management__, доступное в панели __Database Navigator__, в DataGrip — меню __Data Sources__. 2. Добавьте новый драйвер со следующими настройками (см. рисунок [ниже](#img_driver_settings)): + __(Driver) Name__ — произвольное имя драйвера, например DTM, + __(Class) Name__ — `io.arenadata.dtm.jdbc.DtmDriver`, + __URL Template__ — `jdbc:adtm://{host}:{port}/{database}`, + __Default Port__ (если параметр присутствует) — 9090 или 9092. 3. Нажмите кнопку __Add (File)__ для добавления файла драйвера и выберите файл `dtm-jdbc-.jar` в вашей файловой системе. 4. Сохраните настройки драйвера. 5. Настройте новое подключение к системе с использованием добавленного JDBC-драйвера и укажите URL для подключения (например, `jdbc:adtm://10.92.3.3:9092`). После завершения настройки подключитесь к системе с помощью SQL-клиента. На рисунке ниже показаны параметры JDBC-драйвера DTM в SQL-клиенте DBeaver. ![](Настройки_драйвера.png){:height=\"50%\" width=\"50%\"} {: .figure-center} *Параметры JDBC-драйвера* {: .figure-caption-center} На рисунке ниже показаны параметры подключения к системе с использованием драйвера DTM. ![](Настройки_подключения.png){:height=\"50%\" width=\"50%\"} {: .figure-center} *Параметры подключения к системе* {: .figure-caption-center} ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_SQL-%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D0%B0/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_SQL-%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D0%B0.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_SQL-%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D0%B0/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_SQL-%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D0%B0.html"
  },"63": {
    "doc": "Порядок обработки запросов на выгрузку данных",
    "title": "Порядок обработки запросов на выгрузку данных",
    "content": "# Порядок обработки запросов на выгрузку данных Запрос на выгрузку данных обрабатывается в следующем порядке: 1. Внешняя информационная система формирует запрос [INSERT INTO download_external_table](../../../Справочная_информация/Запросы_SQLplus/INSERT_INTO_download_external_table/INSERT_INTO_download_external_table.md), используя JDBC-драйвер DTM. 2. Запрос поступает в сервис исполнения запросов DTM. 3. Сервис исполнения запросов анализирует запрос и запрашивает актуальную информацию о [логической схеме данных](../../Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md) в [сервисной базе данных](../../Основные_понятия/Сервисная_база_данных/Сервисная_база_данных.md). 4. Сервис исполнения запросов на основании [конфигурации](../../../Эксплуатация/Конфигурация/Конфигурация.md) определяет, для какой [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../Основные_понятия/Хранилище_данных/Хранилище_данных.md) данных предназначен запрос, и отправляет в соответствующий коннектор команду на выгрузку данных из этой СУБД. 5. Коннектор выгружает данные в топик Kafka, который определен в свойствах внешней таблицы выгрузки, указанной в запросе. 6. После успешного выполнения выгрузки данных JDBC-драйвер возвращает синхронный ответ во внешнюю информационную систему. Подробнее о компонентах системы см. в разделе [Компоненты системы](../../Компоненты_системы/Компоненты_системы.md), обо всех внешних связях системы см. в разделе [Связи с другими системами и компонентами](../Связи_с_другими_системами_и_компонентами.md). ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"64": {
    "doc": "Порядок обработки запросов на загрузку данных",
    "title": "Порядок обработки запросов на загрузку данных",
    "content": "# Порядок обработки запросов на загрузку данных Запрос на загрузку данных в [логическую таблицу](../../Основные_понятия/Логическая_таблица/Логическая_таблица.md) обрабатывается в следующем порядке: 1. Внешняя информационная система формирует запрос [INSERT INTO logical_table](../../../Справочная_информация/Запросы_SQLplus/INSERT_INTO_logical_table/INSERT_INTO_logical_table.md), используя JDBC-драйвер DTM. 2. Запрос поступает в сервис исполнения запросов DTM. 3. Сервис исполнения запросов анализирует запрос и сохраняет информацию о процессе загрузки данных в [сервисной базе данных](../../Основные_понятия/Сервисная_база_данных/Сервисная_база_данных.md). 4. Сервис исполнения запросов отправляет в коннектор каждой из целевых [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../Основные_понятия/Хранилище_данных/Хранилище_данных.md) команду на загрузку данных и отслеживает состояние загрузки с помощью сервиса мониторинга статусов Kafka. Под целевыми подразумеваются СУБД, в которых размещаются данные логической таблицы (см. [CREATE TABLE](../../../Справочная_информация/Запросы_SQLplus/CREATE_TABLE/CREATE_TABLE.md)). 5. Коннектор загружает данные из топика Kafka, который определен в свойствах внешней таблицы загрузки, указанной в запросе. 6. По завершении загрузки всех или каждого пакета данных (в зависимости от типа СУБД) сервис исполнения запросов отправляет в целевые СУБД команду на выполнение задач по [версионированию данных](../../../Работа_с_системой/Загрузка_данных/Версионирование_данных/Версионирование_данных.md). 7. После успешного выполнения загрузки данных JDBC-драйвер возвращает синхронный ответ во внешнюю информационную систему. Подробнее о компонентах системы см. в разделе [Компоненты системы](../../Компоненты_системы/Компоненты_системы.md), обо всех внешних связях системы см. в разделе [Связи с другими системами и компонентами](../Связи_с_другими_системами_и_компонентами.md). ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"65": {
    "doc": "Порядок обработки запросов на обновление логической схемы",
    "title": "Порядок обработки запросов на обновление логической схемы",
    "content": "# Порядок обработки запросов на обновление логической схемы Запрос на обновление [логической схемы данных](../../Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md) обрабатывается в следующем порядке: 1. Внешняя информационная система формирует запрос на обновление логической схемы данных, используя JDBC-драйвер DTM. 2. Запрос поступает в сервис исполнения запросов DTM. 3. Сервис исполнения запросов определяет, для каких СУБД [хранилища](../../Основные_понятия/Хранилище_данных/Хранилище_данных.md) предназначен запрос, модифицирует запрос нужным образом и отправляет в соответствующие СУБД команду на обновление [физической схемы данных](../../Основные_понятия/Физическая_схема_данных/Физическая_схема_данных.md). 4. Сервис исполнения запросов сохраняет изменения логической схемы данных в [сервисной базе данных](../../Основные_понятия/Сервисная_база_данных/Сервисная_база_данных.md). 5. Сервис исполнения запросов публикует сообщение об обновлении логической схемы данных в топике Kafka, указанном в [конфигурации](../../../Эксплуатация/Конфигурация/Конфигурация.md) системы (см. параметр `KAFKA_STATUS_EVENT_TOPIC`). 6. После успешного обновления логической и физической схем данных JDBC-драйвер возвращает синхронный ответ во внешнюю информационную систему. Подробнее о компонентах системы см. в разделе [Компоненты системы](../../Компоненты_системы/Компоненты_системы.md), обо всех внешних связях системы см. в разделе [Связи с другими системами и компонентами](../Связи_с_другими_системами_и_компонентами.md). ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%81%D1%85%D0%B5%D0%BC%D1%8B/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%81%D1%85%D0%B5%D0%BC%D1%8B.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%81%D1%85%D0%B5%D0%BC%D1%8B/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%81%D1%85%D0%B5%D0%BC%D1%8B.html"
  },"66": {
    "doc": "Порядок обработки запросов на чтение данных",
    "title": "Порядок обработки запросов на чтение данных",
    "content": "# Порядок обработки запросов на чтение данных Запросы на чтение данных обрабатываются в следующем порядке: 1. Внешняя информационная система формирует запрос, используя JDBC-драйвер DTM. 2. Запрос поступает в сервис исполнения запросов DTM. 3. Сервис исполнения запросов анализирует запрос и запрашивает актуальную информацию о [логической схеме данных](../../Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md) в [сервисной базе данных](../../Основные_понятия/Сервисная_база_данных/Сервисная_база_данных.md). 4. Сервис исполнения запросов определяет, для какой [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../Основные_понятия/Хранилище_данных/Хранилище_данных.md) данных предназначен запрос, модифицирует запрос нужным образом и отправляет в эту СУБД команду на исполнение модифицированного запроса. 5. После успешного выполнения чтения данных JDBC-драйвер возвращает синхронный ответ во внешнюю информационную систему. Подробнее о компонентах системы см. в разделе [Компоненты системы](../../Компоненты_системы/Компоненты_системы.md), обо всех внешних связях системы см. в разделе [Связи с другими системами и компонентами](../Связи_с_другими_системами_и_компонентами.md). ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D1%87%D1%82%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D1%87%D1%82%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D1%87%D1%82%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%9F%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%BE%D0%B2_%D0%BD%D0%B0_%D1%87%D1%82%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"67": {
    "doc": "Программное подключение",
    "title": "Программное подключение",
    "content": "# Программное подключение JDBC-драйвер системы позволяет подключаться программно (без использования SQL-клиента). Вы можете реализовать свое приложение, работающее с системой через JDBC-подключение. Чтобы подключиться к системе с помощью программного подключения: 1. Загрузите скомпилированный файл драйвера с именем `dtm-jdbc-.jar`. 2. Определите путь к jar-файлу драйвера любым из способов: 1. задайте путь с помощью переменной окружения `CLASSPATH`; 2. задайте путь в командной строке при запуске своего приложения (формат зависит от операционной системы): ```java java -classpath //dtm-jdbc-.jar myapplication.class ``` 3. В реализации класса вашего приложения, который отвечает за подключение к системе (см. пример [ниже](#ex_connection_class)): 1. импортируйте пакеты Java SQL: ```java import java.sql.*; ``` 2. если используется Java версии менее 1.6, загрузите драйвер в память: ```java Class.forName(\"io.arenadata.dtm.jdbc.DtmDriver\"); ``` 3. установите соединение с системой с помощью метода `DriverManager.getConnection()` в следующем формате: ```java String url = \"jdbc:adtm://DtmHost:portNumber/logicalDatabaseName\"; Connection conn = DriverManager.getConnection(url, null, null); ``` Строка `url` содержит параметры: * `DtmHost` — IP-адрес или имя хоста, на котором установлена система; * `portNumber` — номер порта для подключения; * (опционально) `logicalDatabaseName` — имя логической базы данных, используемой по умолчанию. Пример `url`: ```java String url = \"jdbc:adtm://10.92.3.3:9092/demo\"; Connection conn = DriverManager.getConnection(url, null, null); ``` После установки соединения можно выполнять [запросы SQL+](../../../Справочная_информация/Запросы_SQLplus/Запросы_SQLplus.md). По окончании работы с системой нужно закрыть подключение. В примере ниже показана базовая реализация класса `SimpleDtmJDBCExample`, который устанавливает соединение с системой по заданному адресу и затем закрывает соединение. ```java import java.sql.*; public class SimpleDtmJDBCExample { public static void main(String[] args) { Connection conn; String url = \"jdbc:adtm://10.92.3.3:9092/demo\"; try { conn = DriverManager.getConnection(url); System.out.println(\"Connected\"); } catch (SQLException e) { // Catch all for the SQL exceptions e.printStackTrace(); } finally { conn.close(); } } ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9F%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%BD%D0%BE%D0%B5_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9F%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%BD%D0%BE%D0%B5_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9F%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%BD%D0%BE%D0%B5_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5/%D0%9F%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%BD%D0%BE%D0%B5_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5.html"
  },"68": {
    "doc": "Работа с системой",
    "title": "Работа с системой",
    "content": "# Работа с системой ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9.html"
  },"69": {
    "doc": "Ресурсы",
    "title": "Ресурсы",
    "content": "# Ресурсы [github-репозиторий Prostore](https://github.com/arenadata/prostore) Коннекторы - [github-репозиторий Kafka PXF connector](https://github.com/arenadata/kafka-pxf-connector) - [github-репозиторий Kafka Clickhouse connector](https://github.com/arenadata/kafka-clickhouse-connector) - [github-репозиторий Kafka Tarantool loader](https://github.com/arenadata/kafka-tarantool-loader) - [github-репозиторий Kafka ADB connector](https://github.com/arenadata/kafka-adb-os) - [github-репозиторий Apache Avro fork](https://github.com/arenadata/avro/tree/1.10.2_arenadata1/lang/c) ",
    "url": "/%D0%A0%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B/%D0%A0%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B.html",
    "relUrl": "/%D0%A0%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B/%D0%A0%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B.html"
  },"70": {
    "doc": "Связи с другими системами и компонентами",
    "title": "Связи с другими системами и компонентами",
    "content": "# Связи с другими системами и компонентами Система взаимодействует со следующими внешними системами и компонентами (см. рисунок [ниже](#img_interactions)): * внешней информационной системой-клиентом (по JDBC-интерфейсу), * [сервисной базой данных](../Основные_понятия/Сервисная_база_данных/Сервисная_база_данных.md) (по API ZooKeeper), * [СУБД](../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../Основные_понятия/Хранилище_данных/Хранилище_данных.md) данных (по интерфейсу JDBC или REST API — в зависимости от типа СУБД), * коннекторами (по API коннекторов); * брокером сообщений Kafka (по API Kafka). На рисунке ниже показаны взаимодействия системы с внешними системами и компонентами. ![](Связи_с_другими_системами_и_компонентами.svg){:height=\"70%\" width=\"70%\"} {: .figure-center} *Внешние взаимодействия системы* {: .figure-caption-center} Взаимодействия системы с внешними системами и компонентами при выполнении основных действий описаны в разделах: * [Порядок обработки запросов на обновление логической схемы](Порядок_обработки_запросов_на_обновление_логической_схемы/Порядок_обработки_запросов_на_обновление_логической_схемы.md) * [Порядок обработки запросов на загрузку данных](Порядок_обработки_запросов_на_загрузку_данных/Порядок_обработки_запросов_на_загрузку_данных.md) * [Порядок обработки запросов на выгрузку данных](Порядок_обработки_запросов_на_выгрузку_данных/Порядок_обработки_запросов_на_выгрузку_данных.md) * [Порядок обработки запросов на чтение данных](Порядок_обработки_запросов_на_чтение_данных/Порядок_обработки_запросов_на_чтение_данных.md) ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8/%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%BC%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8.html"
  },"71": {
    "doc": "Сервисная база данных",
    "title": "Сервисная база данных",
    "content": "# Сервисная база данных _Сервисная база данных_ — сервис, используемый ядром системы для хранения метаданных, в частности [логической схемы данных](../Логическая_схема_данных/Логическая_схема_данных.md) и информации о [дельтах](../Дельта/Дельта.md). ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%A1%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%BD%D0%B0%D1%8F_%D0%B1%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%BD%D0%B0%D1%8F_%D0%B1%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%A1%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%BD%D0%B0%D1%8F_%D0%B1%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%BD%D0%B0%D1%8F_%D0%B1%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"72": {
    "doc": "Системные представления (INFORMATION_SCHEMA)",
    "title": "Системные представления (INFORMATION_SCHEMA)",
    "content": "# Системные представления (INFORMATION_SCHEMA) Набор системных представлений (INFORMATION_SCHEMA) предоставляет доступ к метаданным [логической схемы данных](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md) и содержит следующие элементы: * [schemata](#schemata), * [tables](#tables), * [columns](#columns), * [table_constraints](#table_constraints), * [key_column_usage](#key_column_usage). Набор системных представлений и их свойств фиксирован и недоступен для изменения. ## schemata Системное представление `schemata` содержит список [логических баз данных](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md) [окружения](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Окружение/Окружение.md). По каждой логической базе доступна следующая информация: * `catalog_name` — наименование каталога, в который помещена логическая база данных. Значение по умолчанию — public; * `schema_name` — наименование логической базы данных. ## tables Системное представление `tables` содержит список [логических таблиц](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) и [представлений](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md) окружения. По каждой таблице или представлению доступна следующая информация: * `table_catalog` — наименование каталога, в который помещена таблица или представление. Значение по умолчанию — public; * `table_schema` — наименование логической базы данных, к которой относится таблица или представление; * `table_name` — наименование таблицы или представления; * `table_type` — тип объекта. Возможные значения: BASE_TABLE — логическая таблица, VIEW — логическое представление. ## columns Системное представление `columns` содержит список столбцов логических таблиц и представлений окружения. По каждому столбцу доступна следующая информация: * `table_catalog` — наименование каталога, в который помещена таблица или представление. Значение по умолчанию — public; * `table_schema` — наименование логической базы данных, к которой относится таблица или представление; * `table_name` — наименование таблицы или представления, к которому относится столбец; * `column_name` — наименование столбца, по которому предоставлена информация; * `is_nullable` — признак того, может ли значение столбца иметь пустое значение (null). Возможные значения: YES — столбец может содержать пустое значение; NO — столбец должен содержать непустое значение; * `ordinal_position` — порядковый номер столбца в таблице или представлении (нумерация начинается с 1); * `character_maximum_length` — максимально допустимое количество символов (для строковых значений); * `datetime_precision` — степень отображаемой точности значений типа TIMESTAMP. Возможное значение: от 0 (точность до секунд) до 6 (точность до микросекунд). * `data_type` — тип данных столбца. Возможные значения см. в разделе [Логические типы данных](../Поддерживаемые_типы_данных/Логические_типы_данных/Логические_типы_данных.md). ## table_constraints Системное представление `table_constraints` содержит список ограничений логических таблиц и представлений окружения. По каждому ограничению доступна следующая информация: * `constraint_catalog` — наименование каталога, в который помещена таблица или представление с ограничением. Значение по умолчанию — public; * `constraint_schema` — наименование логической базы данных, к которой относится таблица или представление с ограничением; * `constraint_name` — наименование ограничения; * `table_schema` — наименование логической базы данных, к которой относится таблица или представление с ограничением; * `table_name` — наименование таблицы или представления, к которому относится ограничение; * `constraint_type` — тип ограничения. Возможные значения: primary key — первичный ключ, sharding key — ключ шардирования. ## key_column_usage Системное представление `key_column_usage` содержит список столбцов окружения, с которыми связаны какие-либо ограничения. По каждому столбцу доступна следующая информация: * `constraint_catalog` — наименование каталога, в который помещена таблица или представление с ограничением. Значение по умолчанию — public; * `constraint_schema` — наименование логической базы данных, к которой относится таблица или представление с ограничением; * `constraint_name` — наименование ограничения; * `table_schema` — наименование логической базы данных, к которой относится таблица или представление с ограничением; * `table_name` — наименование таблицы или представления, к которому относится ограничение; * `column_name` — наименование столбца, на который накладывается ограничение; * `ordinal_position` — порядковый номер поля в ключе (нумерация начинается с 1). ## Взаимосвязь системных представлений На рисунке ниже показана взаимосвязь системных представлений. ![](Связь_системных_представлений.svg) {: .figure-center} *Взаимосвязь системных представлений* {: .figure-caption-center} ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_INFORMATION_SCHEMA/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_INFORMATION_SCHEMA.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_INFORMATION_SCHEMA/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_INFORMATION_SCHEMA.html"
  },"73": {
    "doc": "Создание внешней таблицы выгрузки",
    "title": "Создание внешней таблицы выгрузки",
    "content": "# Создание внешней таблицы выгрузки Чтобы создать [внешнюю таблицу выгрузки](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) в [логической БД](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), выполните запрос [CREATE DOWNLOAD EXTERNAL TABLE](../../../Справочная_информация/Запросы_SQLplus/CREATE_DOWNLOAD_EXTERNAL_TABLE/CREATE_DOWNLOAD_EXTERNAL_TABLE.md) (см. пример [ниже](#пример)). При успешном выполнении запроса в [логической схеме данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md) появляется новая внешняя таблица выгрузки. Проверить наличие внешней таблицы можно в дереве объектов SQL-клиента (см. рисунок [ниже](#img_table_in_tree)). **Совет:** для удобства разделения таблиц выгрузки и загрузки рекомендуется задавать имя таблицы, указывающее на ее тип (например, `transactions_ext_download` или `transactions_ext_upload`). **Примечание:** внешняя таблица представляет собой декларацию приемника данных и формата выгрузки данных и не хранит сами данные. На рисунке ниже показан фрагмент дерева объектов SQL-клиента, которое содержит внешнюю таблицу выгрузки `sales_ext_download`. ![](Внешняя_таблица_выгрузки.png){:height=\"50%\" width=\"50%\"} {: .figure-center} *Внешняя таблица выгрузки в дереве объектов* {: .figure-caption-center} ## Пример ```sql -- выбор базы данных sales по умолчанию USE sales -- создание внешней таблицы выгрузки CREATE DOWNLOAD EXTERNAL TABLE sales.sales_ext_download ( identification_number INT, transaction_date TIMESTAMP, product_code VARCHAR(256), product_units INT, store_id INT, description VARCHAR(256) ) LOCATION 'kafka://zk1:2181,zk2:2181,zk3:2181/sales_out' FORMAT 'AVRO' CHUNK_SIZE 1000 ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8.html"
  },"74": {
    "doc": "Создание внешней таблицы загрузки",
    "title": "Создание внешней таблицы загрузки",
    "content": "# Создание внешней таблицы загрузки Чтобы создать [внешнюю таблицу загрузки](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) в [логической БД](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), выполните запрос [CREATE UPLOAD EXTERNAL TABLE](../../../Справочная_информация/Запросы_SQLplus/CREATE_UPLOAD_EXTERNAL_TABLE/CREATE_UPLOAD_EXTERNAL_TABLE.md) (см. пример [ниже](#пример)). При успешном выполнении запроса в [логической схеме данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md) появляется новая внешняя таблица загрузки. Проверить наличие внешней таблицы можно в дереве объектов SQL-клиента (см. рисунок [ниже](#img_table_in_tree)). **Совет:** для удобства разделения таблиц загрузки и выгрузки рекомендуется задавать имя таблицы, указывающее на ее тип (например, `transactions_ext_upload` или `transactions_ext_download`). **Примечание:** внешняя таблица представляет собой декларацию источника данных и формата загрузки данных и не хранит сами данные. На рисунке ниже показан фрагмент дерева объектов SQL-клиента, которое содержит внешнюю таблицу загрузки `sales_ext_upload`. ![](Внешняя_таблица_загрузки.png){:height=\"40%\" width=\"40%\"} {: .figure-center} *Внешняя таблица загрузки в дереве объектов* {: .figure-caption-center} ## Пример ```sql -- выбор базы данных sales по умолчанию USE sales -- создание внешней таблицы загрузки CREATE UPLOAD EXTERNAL TABLE sales_ext_upload ( identification_number INT, transaction_date TIMESTAMP, product_code VARCHAR(256), product_units INT, store_id INT, description VARCHAR(256) ) LOCATION 'kafka://zk1:2181,zk2:2181,zk3:2181/sales' FORMAT 'AVRO' MESSAGE_LIMIT 1000 ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8.html"
  },"75": {
    "doc": "Создание логического представления",
    "title": "Создание логического представления",
    "content": "# Создание логического представления Логическое представление можно создать на основе данных одной или нескольких [логических таблиц](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md). Чтобы создать [логическое представление](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md) в [логической БД](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), выполните запрос [CREATE VIEW](../../../Справочная_информация/Запросы_SQLplus/CREATE_VIEW/CREATE_VIEW.md) (см. пример [ниже](#пример)). При успешном выполнении запроса в [логической схеме данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md) появляется новое логическое представление. Чтобы проверить наличие логического представления, используйте любой из способов: * выполните [запрос метаданных](../Запрос_метаданных_логической_схемы/Запрос_метаданных_логической_схемы.md) логической схемы данных, * выполните запрос [SELECT](../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md) к логическому представлению, * проверьте дерево объектов в вашем SQL-клиенте (см. рисунок ниже). На рисунке ниже показан фрагмент дерева объектов SQL-клиента, которое содержит логическое представление `stores_by_sold_products`. ![](Логическое_представление.png){:height=\"50%\" width=\"50%\"} {: .figure-center} *Логическое представление в дереве объектов* {: .figure-caption-center} ## Пример ```sql -- выбор базы данных sales по умолчанию USE sales -- создание представления stores_by_sold_products CREATE VIEW stores_by_sold_products AS SELECT store_id, SUM(product_units) AS product_quantity FROM sales.sales GROUP BY store_id ORDER BY product_amount DESC LIMIT 30 -- проверка наличия логического представления stores_by_sold_products SELECT CASE WHEN count(*) > 0 THEN 'представление существует' ELSE 'представления не существует' END FROM INFORMATION_SCHEMA.tables WHERE table_schema = 'SALES' AND table_name = 'STORES_BY_SOLD_PRODUCTS' ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F.html"
  },"76": {
    "doc": "Создание логической базы данных",
    "title": "Создание логической базы данных",
    "content": "# Создание логической базы данных Чтобы создать [логическую базу данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), выполните запрос [CREATE DATABASE](../../../Справочная_информация/Запросы_SQLplus/CREATE_DATABASE/CREATE_DATABASE.md) (см. пример [ниже](#пример)). В случае успешного выполнения запроса в [логической схеме данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md) появляется новая логическая база данных. Чтобы проверить наличие логической базы данных, используйте любой из способов: * выполните [запрос метаданных](../Запрос_метаданных_логической_схемы/Запрос_метаданных_логической_схемы.md) логической схемы данных, * проверьте дерево объектов в вашем SQL-клиенте (см. рисунок [ниже](#img_table_in_tree)). **Совет:** для удобства написания последующих запросов к этой логической базе данных ее можно выбрать в качестве [используемой по умолчанию](../../Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md). На рисунке ниже показана логическая БД в дереве объектов SQL-клиента (см. рисунок ниже). ![](Логическая_база_данных.png){:height=\"50%\" width=\"50%\"} {: .figure-center} *Логическая БД в дереве объектов* {: .figure-caption-center} ## Пример ``` sql -- создание логической базы данных sales CREATE DATABASE sales -- проверка наличия логической базы данных sales SELECT CASE WHEN count(*) > 0 THEN 'БД существует' ELSE 'БД не существует' END FROM INFORMATION_SCHEMA.schemata WHERE schema_name = 'SALES' -- выбор логической базы данных sales в качестве базы данных по умолчанию USE SALES ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"77": {
    "doc": "Создание логической таблицы",
    "title": "Создание логической таблицы",
    "content": "# Создание логической таблицы Чтобы создать [логическую таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) в [логической базе данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), выполните запрос [CREATE TABLE](../../../Справочная_информация/Запросы_SQLplus/CREATE_TABLE/CREATE_TABLE.md) (см. пример [ниже](#пример)). При успешном выполнении запроса в [логической схеме данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md) появляется новая логическая таблица. Чтобы проверить наличие логической таблицы, используйте любой из способов: * выполните [запрос метаданных](../Запрос_метаданных_логической_схемы/Запрос_метаданных_логической_схемы.md) логической схемы данных, * выполните запрос [SELECT](../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md) к логической таблице, * проверьте дерево объектов в вашем SQL-клиенте (см. рисунок ниже). На рисунке ниже показан фрагмент дерева объектов, которое содержит логические таблицы `sales` и `stores`, в SQL-клиенте. ![](Логическая_таблица.png){:height=\"40%\" width=\"40%\"} {: .figure-center} *Логические таблицы в дереве объектов* {: .figure-caption-center} ## Пример ```sql -- выбор базы данных sales по умолчанию USE sales -- создание таблицы sales CREATE TABLE sales ( identification_number INT NOT NULL, transaction_date TIMESTAMP NOT NULL, product_code VARCHAR(256) NOT NULL, product_units INT NOT NULL, store_id INT NOT NULL, description VARCHAR(256), PRIMARY KEY (identification_number) ) DISTRIBUTED BY (identification_number) -- проверка наличия логической таблицы sales SELECT CASE WHEN count(*) > 0 THEN 'таблица существует' ELSE 'таблицы не существует' END FROM INFORMATION_SCHEMA.tables WHERE table_schema = 'SALES' AND table_name = 'SALES' ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B.html"
  },"78": {
    "doc": "Справочная информация",
    "title": "Справочная информация",
    "content": "# Справочная информация ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F.html"
  },"79": {
    "doc": "Термины и определения",
    "title": "Термины и определения",
    "content": "# Термины и определения _Система_ — система DTM, описываемая в данном документе. _Внешняя информационная система_ — внешняя система, которая является источником загружаемых данных и (или) получателем выгружаемых данных. _СУБД_ — СУБД из числа [поддерживаемых](../Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) системой. _СУБД выгрузки данных_ — СУБД, из которой выгружаются данные системы. СУБД выгрузки данных определяется в конфигурации системы. _Фиксация изменений в данных_ — процесс сохранения состояния витрины данных, запускаемый соответствующей командой после загрузки данных в систему. _Горячая запись_ — запись, которая загружена в систему, но еще не зафиксирована. После фиксации изменений горячая запись переходит в категорию актуальных. _Актуальная запись_ — зафиксированная запись, которая является актуальной на данный момент. _Архивная запись_ — зафиксированная запись, которая больше не является актуальной. ",
    "url": "/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/%D0%A2%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D1%8B_%D0%B8_%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F/%D0%A2%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D1%8B_%D0%B8_%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F.html",
    "relUrl": "/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5/%D0%A2%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D1%8B_%D0%B8_%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F/%D0%A2%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D1%8B_%D0%B8_%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F.html"
  },"80": {
    "doc": "Удаление внешней таблицы выгрузки",
    "title": "Удаление внешней таблицы выгрузки",
    "content": "# Удаление внешней таблицы выгрузки Чтобы удалить [внешнюю таблицу выгрузки](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md), выполните запрос [DROP DOWNLOAD EXTERNAL TABLE](../../../Справочная_информация/Запросы_SQLplus/DROP_DOWNLOAD_EXTERNAL_TABLE/DROP_DOWNLOAD_EXTERNAL_TABLE.md) (см. пример [ниже](#пример)). При успешном выполнении запроса внешняя таблица выгрузки удаляется из [логической схемы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md). ## Пример ```sql -- выбор базы данных sales по умолчанию USE sales -- удаление внешней таблицы выгрузки DROP DOWNLOAD EXTERNAL TABLE sales_ext_download ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8.html"
  },"81": {
    "doc": "Удаление внешней таблицы загрузки",
    "title": "Удаление внешней таблицы загрузки",
    "content": "# Удаление внешней таблицы загрузки Чтобы удалить [внешнюю таблицу загрузки](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md), выполните запрос [DROP UPLOAD EXTERNAL TABLE](../../../Справочная_информация/Запросы_SQLplus/DROP_UPLOAD_EXTERNAL_TABLE/DROP_UPLOAD_EXTERNAL_TABLE.md) (см. пример [ниже](#пример)). При успешном выполнении запроса внешняя таблица удаляется из [логической схемы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md). ## Пример ```sql -- выбор базы данных sales по умолчанию USE sales -- удаление внешней таблицы загрузки DROP UPLOAD EXTERNAL TABLE sales_ext_upload ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8.html"
  },"82": {
    "doc": "Удаление логического представления",
    "title": "Удаление логического представления",
    "content": "# Удаление логического представления Чтобы удалить [логическое представление](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md) из [логической БД](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), выполните запрос [DROP VIEW](../../../Справочная_информация/Запросы_SQLplus/DROP_VIEW/DROP_VIEW.md) (см. пример [ниже](#пример)). При успешном выполнении запроса логическое представление удаляется из [логической схемы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md). Удаление логического представления никак не отражается в [хранилище](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md). ## Пример ```sql -- выбор базы данных sales по умолчанию USE sales -- удаление представления stores_by_sold_products DROP VIEW stores_by_sold_products -- проверка наличия логического представления stores_by_sold_products SELECT CASE WHEN count(*) > 0 THEN 'представление существует' ELSE 'представления не существует' END FROM INFORMATION_SCHEMA.tables WHERE table_schema = 'SALES' AND table_name = 'STORES_BY_SOLD_PRODUCTS' ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F.html"
  },"83": {
    "doc": "Удаление логической базы данных",
    "title": "Удаление логической базы данных",
    "content": "# Удаление логической базы данных Чтобы удалить [логическую базу данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), выполните запрос [DROP DATABASE](../../../Справочная_информация/Запросы_SQLplus/DROP_DATABASE/DROP_DATABASE.md) (см. пример [ниже](#пример)). При успешном выполнении запроса все данные, связанные с логической БД, удаляются из хранилища, и все соответствующие логические сущности удаляются из [схемы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md). ## Пример ``` sql -- удаление логической базы данных sales DROP DATABASE sales -- проверка наличия логической базы данных sales SELECT CASE WHEN count(*) > 0 THEN 'БД существует' ELSE 'БД не существует' END FROM INFORMATION_SCHEMA.schemata WHERE schema_name = 'SALES' ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"84": {
    "doc": "Удаление логической таблицы",
    "title": "Удаление логической таблицы",
    "content": "# Удаление логической таблицы Чтобы удалить [логическую таблицу](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md) и ее данные, выполните запрос [DROP TABLE](../../../Справочная_информация/Запросы_SQLplus/DROP_TABLE/DROP_TABLE.md) (см. пример [ниже](#пример)). При успешном выполнении запроса все данные, связанные с логической таблицей, удаляются из указанных [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md). Логическая таблица удаляется при удалении ее последнего месторасположения (см. секцию `DATASOURCE_TYPE` в разделе [DROP TABLE](../../../Справочная_информация/Запросы_SQLplus/DROP_TABLE/DROP_TABLE.md)). ## Пример ```sql -- выбор базы данных sales по умолчанию USE sales -- удаление таблицы sales из СУБД ADQM DROP TABLE sales DATASOURCE_TYPE = 'adqm' -- проверка наличия логической таблицы sales SELECT CASE WHEN count(*) > 0 THEN 'таблица существует' ELSE 'таблицы не существует' END FROM INFORMATION_SCHEMA.tables WHERE table_schema = 'SALES' AND table_name = 'SALES' -- удаление таблицы sales из оставшихся СУБД (ADB, ADG) DROP TABLE sales -- проверка наличия логической таблицы sales SELECT CASE WHEN count(*) > 0 THEN 'таблица существует' ELSE 'таблицы не существует' END FROM INFORMATION_SCHEMA.tables WHERE table_schema = 'SALES' AND table_name = 'SALES' ``` ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B/%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B.html"
  },"85": {
    "doc": "Управление схемой данных",
    "title": "Управление схемой данных",
    "content": "# Управление схемой данных Система позволяет организовать структуру данных с помощью [логической схемы данных](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md). Доступны следующие действия по управлению логической схемой данных: * [Создание логической базы данных](Создание_логической_базы_данных/Создание_логической_базы_данных.md) * [Удаление логической базы данных](Удаление_логической_базы_данных/Удаление_логической_базы_данных.md) * [Создание логической таблицы](Создание_логической_таблицы/Создание_логической_таблицы.md) * [Удаление логической таблицы](Удаление_логического_представления/Удаление_логического_представления.md) * [Создание логического представления](Создание_логического_представления/Создание_логического_представления.md) * [Изменение логического представления](Изменение_логического_представления/Изменение_логического_представления.md) * [Удаление логического представления](Удаление_логического_представления/Удаление_логического_представления.md) * [Создание внешней таблицы загрузки](Создание_внешней_таблицы_загрузки/Создание_внешней_таблицы_загрузки.md) * [Удаление внешней таблицы загрузки](Удаление_внешней_таблицы_загрузки/Удаление_внешней_таблицы_загрузки.md) * [Создание внешней таблицы выгрузки](Создание_внешней_таблицы_выгрузки/Создание_внешней_таблицы_выгрузки.md) * [Удаление внешней таблицы выгрузки](Удаление_внешней_таблицы_выгрузки/Удаление_внешней_таблицы_выгрузки.md) * [Запрос метаданных логической схемы](Запрос_метаданных_логической_схемы/Запрос_метаданных_логической_схемы.md) Запросы на обновление логической схемы данных обрабатываются в порядке, описанном в разделе [Порядок обработки запросов на обновление логической схемы](../../Обзор_понятий_компонентов_и_связей/Связи_с_другими_системами_и_компонентами/Порядок_обработки_запросов_на_обновление_логической_схемы/Порядок_обработки_запросов_на_обновление_логической_схемы.md). ",
    "url": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%85%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"86": {
    "doc": "Физическая схема данных",
    "title": "Физическая схема данных",
    "content": "# Физическая схема данных _Физическая схема данных_ — структура хранения данных в [хранилище](../Хранилище_данных/Хранилище_данных.md), создаваемая и поддерживаемая системой. Для каждой [логической таблицы](../Логическая_таблица/Логическая_таблица.md) система создает и поддерживает набор [физических таблиц](../Физическая_таблица/Физическая_таблица.md), перечисленных в таблице ниже. Состав набора физических таблиц зависит от типа [СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) хранилища. | Физическая таблица | ADB | ADG | ADQM |:-|:-:|:-:|:-: | _staging | +Горячие записи | +Горячие записи | − | tbl_buffer | − | − | +Идентификаторы горячих записей | _actual | +Актуальные и архивные записи | +Актуальные записи | +Горячие, актуальные и архивные записи **всех** узлов кластера | _history | − | +Архивные записи | − | _actual_shard | − | − | +Горячие, актуальные и архивные записи узла кластера | tbl_buffer_shard | − | − | +Идентификаторы горячих записей узла кластера ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%A4%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%81%D1%85%D0%B5%D0%BC%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A4%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%81%D1%85%D0%B5%D0%BC%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%A4%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%81%D1%85%D0%B5%D0%BC%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A4%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%81%D1%85%D0%B5%D0%BC%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"87": {
    "doc": "Физическая таблица",
    "title": "Физическая таблица",
    "content": "# Физическая таблица _Физическая таблица_ — таблица СУБД [хранилища](../Хранилище_данных/Хранилище_данных.md), каждая запись которой описывает состояние объекта [логической таблицы](../Логическая_таблица/Логическая_таблица.md) в определенный период времени. В зависимости от [типа физической таблицы](../Физическая_схема_данных/Физическая_схема_данных.md) состояние объектов, хранящееся в ней, может быть новым (\"горячим\"), актуальным или архивным. Все данные, загруженные в систему, до фиксации изменений считаются новым состоянием объектов и хранятся в виде горячих записей. При фиксации изменений система одномоментно обновляет состояние объектов, исключая возможность чтения грязных данных. Обновление происходит в следующем порядке: 1. Сравниваются новое и актуальное состояния объектов. 2. Определяется, какие записи нужно добавить (если таких объектов нет среди актуальных данных), а какие — заменить новыми (если объекты уже есть в системе, и нужно обновить их состояние). 3. Состояние новых объектов фиксируется в виде актуальных записей. 4. Для существующих объектов записи, которые считались актуальными до момента фиксации изменений, перемещаются в категорию архивных, а новое состояние объектов фиксируется в виде актуальных записей. 5. Все горячие записи удаляются. 6. В историю изменений состояния системы добавляется новая [дельта](../Дельта/Дельта.md) с номером, увеличенным на 1 относительно предыдущей зафиксированной дельты. На рисунке ниже показан пример обновления состояния объекта — набора данных одного клиента. В примере рассматривается следующая ситуация: номер телефона клиента был ранее изменен со значения `phone_1` на `phone_2`, это изменение было зафиксировано, и теперь загружаются данные того же клиента с новым адресом (`address_2`). ![](Физическая_таблица.svg) {: .figure-center} *Обновление данных клиента* {: .figure-caption-center} В условиях, рассмотренных в примере, данные клиента обновляются в следующем порядке: 1. Загрузка данных: запись с новым адресом (`address_2`) сохраняется в качестве горячей записи. 2. Фиксация изменений данных: запись с предыдущим адресом (`address_1`) переносится в категорию архивных, запись с новым адресом (`address_2`) — в категорию актуальных, и горячая запись удаляется. Обновление записей происходит одномоментно. ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%A4%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0/%D0%A4%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%A4%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0/%D0%A4%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0.html"
  },"88": {
    "doc": "Формат выгрузки данных",
    "title": "Формат выгрузки данных",
    "content": "# Формат выгрузки данных Данные выгружаются из системы в следующем формате: * Выгрузка данных выполняется в топик Kafka, указанных в настройках внешней таблицы выгрузки. * Тело сообщения содержит бинарный файл в формате Avro, состоящий из схемы данных и набора записей, которые соответствуют этой схеме данных. * Схема данных тела сообщения содержит следующие элементы: имя, тип “record” и перечень полей. Для каждого поля указано имя, а также тип данных из числа перечисленных в разделе [Выгружаемые типы данных](../Поддерживаемые_типы_данных/Выгружаемые_типы_данных/Выгружаемые_типы_данных.md) (см. пример [ниже](#пример-выгружаемой-схемы-данных-avro)). * Состав и порядок полей совпадают в следующих объектах: * во внешней таблице выгрузки, * в схеме данных тела сообщения, * в наборе выгружаемых записей. Типы данных Avro, доступные к выгрузке из системы, описаны в разделе [Выгружаемые типы данных](../Поддерживаемые_типы_данных/Выгружаемые_типы_данных/Выгружаемые_типы_данных.md). Подробнее о формате Avro см. в официальной документации на сайте [https://avro.apache.org](https://avro.apache.org/). ## Примеры ### Пример выгружаемой схемы данных Avro Пример ниже содержит схему данных Avro, выгружаемую с данными о продажах из СУБД ADB. Для наглядности примера бинарные данные представлены в **JSON-формате**. ```json { \"name\": \"row\", \"type\": \"record\", \"fields\": [ { \"name\": \"identification_number\", \"type\": \"long\" }, { \"name\": \"transaction_date\", \"type\": \"long\" }, { \"name\": \"product_code\", \"type\": \"string\" }, { \"name\": \"product_units\", \"type\": \"long\" }, { \"name\": \"store_id\", \"type\": \"long\" }, { \"name\": \"description\", \"type\": \"string\" } ] } ``` ### Пример выгружаемых записей Avro В примере ниже показан набор записей Avro о продажах, выгруженных из СУБД ADB и соответствующих схеме из предыдущего примера. Для наглядности примера бинарные данные представлены в **JSON-формате**. ```json [ { \"identification_number\": 1000111, \"transaction_date\": 1614269474000000, \"product_code\": \"ABC102101\", \"product_units\": 2, \"store_id\": 1000012345, \"description\": \"Покупка по акции 1+1\" }, { \"identification_number\": 1000112, \"transaction_date\": 1614334214000000, \"product_code\": \"ABC102001\", \"product_units\": 1, \"store_id\": 1000000123, \"description\": \"Покупка без акций\" } ] ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%B2%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"89": {
    "doc": "Формат загрузки данных",
    "title": "Формат загрузки данных",
    "content": "# Формат загрузки данных Данные загружаются в систему в виде сообщений топиков Kafka. Сообщения имеют структуру, показанную на рисунке ниже. ![](Структура_загружаемого_сообщения.svg) {: .figure-center} *Структура загружаемых сообщений* {: .figure-caption-center} Для успешной загрузки данные должны соответствовать следующим условиям: * Данные представлены в виде сообщений топика Kafka. * Каждое сообщение состоит из заголовка и тела сообщения. Требования к ключу заголовка не предъявляются. * Тело сообщения содержит бинарный файл в формате Apache Avro, состоящий из схемы данных и набора записей, которые соответствуют этой схеме данных. * Схема данных тела сообщения содержит следующие элементы: имя, тип “record” и перечень полей. Для каждого поля указано имя, а также тип данных из числа перечисленных в разделе [Загружаемые типы данных](../Поддерживаемые_типы_данных/Загружаемые_типы_данных/Загружаемые_типы_данных.md) (см. пример [ниже](#пример-загружаемой-схемы-данных-avro)). Последним полем схемы указано служебное поле `sys_op` с типом данных int. * В наборе записей тела сообщения для каждой записи указан перечень полей и их значений. Последним полем каждой записи указано служебное поле `sys_op` со значением 0 (если запись добавляется или обновляется) или 1 (если запись удаляется). Имена и порядок перечисления полей, а также типы данных их значений соответствуют схеме данных (см. пример [ниже](#пример-загружаемых-записей-avro)). * Состав и порядок полей совпадают во всех следующих объектах: * в схеме данных тела сообщения, * в наборе загружаемых записей, * во внешней таблице загрузки (поле `sys_op` может отсутствовать, так как при создании внешней таблицы его можно не указывать), * в логической таблице, в которую загружаются данные (поле `sys_op` **должно** отсутствовать, так как оно относится к числу зарезервированных служебных полей). В схеме данных тела сообщения можно использовать логические типы Avro, а также элементы unions (см. пример [ниже](#пример-загружаемой-схемы-данных-avro)). Типы данных Avro, доступные к загрузке в систему, описаны в разделе [Загружаемые типы данных](../Поддерживаемые_типы_данных/Загружаемые_типы_данных/Загружаемые_типы_данных.md). Подробнее о формате Avro см. в официальной документации на сайте [https://avro.apache.org](https://avro.apache.org/). ## Примеры ### Пример загружаемой схемы данных Avro Пример ниже содержит схему данных Avro, используемую для загрузки данных о продажах в логическую таблицу `sales`. Для поля `transaction_date` указан логический тип Avro, для поля `description` — элемент union. Для наглядности примера бинарные данные представлены в **JSON-формате**. ```json { \"name\": \"sales\", \"type\": \"record\", \"fields\": [ { \"name\": \"identification_number\", \"type\": \"long\" }, { \"name\": \"transaction_date\", \"type\": \"long\", \"logicalType\": \"timestamp-micros\" }, { \"name\": \"product_code\", \"type\": \"string\" }, { \"name\": \"product_units\", \"type\": \"long\" }, { \"name\": \"store_id\", \"type\": \"long\" }, { \"name\": \"description\", \"type\": [ \"null\", \"string\" ] }, { \"name\": \"sys_op\", \"type\": \"int\" } ] } ``` ### Пример загружаемых записей Avro Пример ниже содержит набор записей о продажах, загружаемых в логическую таблицу `sales`. Для наглядности примера бинарные данные представлены в **JSON-формате**. ```json [ { \"identification_number\": 1000111, \"transaction_date\": 1614269474000000, \"product_code\": \"ABC102101\", \"product_units\": 2, \"store_id\": 1000012345, \"description\": \"Покупка по акции 1+1\", \"sys_op\": 0 }, { \"identification_number\": 1000112, \"transaction_date\": 1614334214000000, \"product_code\": \"ABC102001\", \"product_units\": 1, \"store_id\": 1000000123, \"description\": \"Покупка без акций\", \"sys_op\": 0 }, { \"identification_number\": 1000020, \"transaction_date\": 1614636614000000, \"product_code\": \"ABC102010\", \"product_units\": 4, \"store_id\": 1000000123, \"description\": \"Покупка по акции 1+1\", \"sys_op\": 1 } ] ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"90": {
    "doc": "Формат пути к внешнему приемнику данных",
    "title": "Формат пути к внешнему приемнику данных",
    "content": "# Формат пути к внешнему приемнику данных При создании [внешних таблиц загрузки и выгрузки](../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Внешняя_таблица/Внешняя_таблица.md) данных необходимо указать путь (URI-строку) к внешнему приемнику данных, из которого извлекаются или в который помещаются данные. Для обоих типов внешних таблиц используется одинаковый формат URI-строки. Доступны следующие способы указания пути к топику Kafka, расположенному на узлах кластера Zookeeper: * полный путь к топику, * путь к топику с использованием переменной, определенной в конфигурации системы. ## Указание полного пути к топику Чтобы указать полный путь к топику Kafka, задайте URI-строку в следующем формате: ```sql kafka://zkhost_1:port_1,zkhost_2:port_2,zkhost_3:port_3/chroot/path/topic_name ``` Где: * `zkhost_N` (обязательный) — имя хоста или IP-адрес хоста Zookeeper, к которому подключен брокер сообщений Kafka; * `port_N` (обязательный) — порт хоста Zookeeper, к которому подключен брокер сообщений Kafka. Должен соответствовать порту, заданному в конфигурации Zookeeper для подключения клиентов (по умолчанию — 2181); * `chroot/path` — путь chroot к метаданным кластера Kafka. Следует использовать при наличии нескольких узлов Kafka в одном кластере Zookeeper; * `topic_name` (обязательный) — имя топика Kafka. ### Примеры Имена нескольких хостов с непустым путем chroot (`chroot_kafka`): ```sql kafka://zk1:2181,zk2:2181,zk3:2181/chroot_kafka/sales ``` IP-адрес одного хоста: ```sql kafka://192.168.60.97:2181/chroot_kafka/sales ``` ## Указание пути к топику с использованием переменной Чтобы указать путь к топику Kafka с использованием переменной конфигурации, задайте URI-строку в следующем формате: ```sql kafka://$kafka/topic_name ``` ### Пример Пример пути к топику `sales`: ```sql kafka://$kafka/sales ``` ",
    "url": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%BF%D1%83%D1%82%D0%B8_%D0%BA_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%BC%D1%83_%D0%BF%D1%80%D0%B8%D0%B5%D0%BC%D0%BD%D0%B8%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%BF%D1%83%D1%82%D0%B8_%D0%BA_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%BC%D1%83_%D0%BF%D1%80%D0%B8%D0%B5%D0%BC%D0%BD%D0%B8%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%BF%D1%83%D1%82%D0%B8_%D0%BA_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%BC%D1%83_%D0%BF%D1%80%D0%B8%D0%B5%D0%BC%D0%BD%D0%B8%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D0%BF%D1%83%D1%82%D0%B8_%D0%BA_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%BC%D1%83_%D0%BF%D1%80%D0%B8%D0%B5%D0%BC%D0%BD%D0%B8%D0%BA%D1%83_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"91": {
    "doc": "Хранилище данных",
    "title": "Хранилище данных",
    "content": "# Хранилище данных _Физическое хранилище данных (далее — хранилище)_ — совокупность [СУБД различного типа](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md), в которых хранятся данные [логических таблиц](../Логическая_таблица/Логическая_таблица.md). Данные в хранилище хранятся в соответствии с [физической схемой данных](../Физическая_схема_данных/Физическая_схема_данных.md). Система предоставляет единый интерфейс взаимодействия с хранилищем в виде [логической базы данных](../Логическая_база_данных/Логическая_база_данных.md). ",
    "url": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%A5%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A5%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html",
    "relUrl": "/%D0%9E%D0%B1%D0%B7%D0%BE%D1%80_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2_%D0%B8_%D1%81%D0%B2%D1%8F%D0%B7%D0%B5%D0%B9/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%B8%D1%8F/%D0%A5%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/%D0%A5%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"
  },"92": {
    "doc": "Эксплуатация",
    "title": "Эксплуатация",
    "content": "# Эксплуатация ",
    "url": "/%D0%AD%D0%BA%D1%81%D0%BF%D0%BB%D1%83%D0%B0%D1%82%D0%B0%D1%86%D0%B8%D1%8F/%D0%AD%D0%BA%D1%81%D0%BF%D0%BB%D1%83%D0%B0%D1%82%D0%B0%D1%86%D0%B8%D1%8F.html",
    "relUrl": "/%D0%AD%D0%BA%D1%81%D0%BF%D0%BB%D1%83%D0%B0%D1%82%D0%B0%D1%86%D0%B8%D1%8F/%D0%AD%D0%BA%D1%81%D0%BF%D0%BB%D1%83%D0%B0%D1%82%D0%B0%D1%86%D0%B8%D1%8F.html"
  }
}
