---
layout: default
title: Дельта
nav_order: 12
parent: Основные понятия
grand_parent: Обзор понятий, компонентов и связей
has_children: false
has_toc: false
---

# Дельта

_Дельта_ — целостная совокупность изменений в [логической базе данных](../Логическая_база_данных/Логическая_база_данных.md). 
Дельта включает все [операции записи](../Операция_записи/Операция_записи.md), 
выполненные между открытием и закрытием этой дельты, и имеет порядковый номер, уникальный в рамках 
логической базы данных.

Нумерация дельт начинается с 0. Дельты упорядочены в порядке возрастания их номеров и формируют историю 
состояний данных логической БД.

На рисунке ниже показана последовательность операций записи, выполненных в рамках дельт с номерами 0 и 1. 
В рамках дельты 0 выполнены операции записи с номерами 0-2, в рамках дельты 1 — операции записи с номерами 3-6.

![](Операции_в_дельте.svg)
{: .figure-center}
*Операции записи двух дельт*
{: .figure-caption-center}

Дельту можно [открыть](../../../Справочная_информация/Запросы_SQLplus/BEGIN_DELTA/BEGIN_DELTA.md), 
[закрыть](../../../Справочная_информация/Запросы_SQLplus/COMMIT_DELTA/COMMIT_DELTA.md) и 
[отменить](../../../Справочная_информация/Запросы_SQLplus/ROLLBACK_DELTA/ROLLBACK_DELTA.md). 
Дельта, которая была открыта и еще не была закрыта, содержит горячие записи и называется открытой 
или горячей. Для каждой логической базы одновременно может быть открыто не более одной дельты. 
Дельта, которая была закрыта (зафиксирована) содержит актуальные записи и называется закрытой.

На рисунке ниже показана последовательность дельт, где дельта с номером 3 является открытой, а все 
предыдущие — закрытыми.

![](Типы_дельт.svg)
{: .figure-center}
*Открытая и закрытые дельты*
{: .figure-caption-center}

Для [загрузки данных](../../../Работа_с_системой/Загрузка_данных/Загрузка_данных.md) 
в логическую БД нужно открыть дельту, загрузить данные в требуемые логические таблицы, 
после чего сохранить изменения (закрыть дельту). В рамках открытой дельты можно выполнить 
произвольное число операций записи.

**Примечание:** не допускается загрузка различных состояний одного и того же объекта 
в рамках одной дельты. Для загрузки обновленных данных объекта нужно закрыть открытую дельту, открыть 
новую дельту и загрузить необходимые изменения (см. пример на рисунке [ниже](#img_data_update)).

На рисунке ниже показан пример обновления данных клиента, сменившего фамилию. Первоначальные данные 
клиента загружены в рамках дельты 0, а обновленные данные — в рамках дельты 1.

<a id="img_data_update"></a>
![](Обновление_данных.svg)
{: .figure-center}
*Обновление данных клиента, сменившего фамилию*
{: .figure-caption-center}

Если нужно вернуть состояние данных, которое предшествовало изменениям, выполненным в рамках открытой 
дельты, следует [откатить дельту](../../../Справочная_информация/Запросы_SQLplus/ROLLBACK_DELTA/ROLLBACK_DELTA.md). 
Откат дельты возможен только для открытой дельты, после закрытия дельты возврат к предыдущему состоянию 
недоступен.

При запросе и выгрузке данных номер дельты можно использовать, чтобы указать момент или период, 
по состоянию на который запрашивается информация (см. директиву [FOR SYSTEM_TIME](../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md#sect_for_system_time) 
в разделе [SELECT](../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md)).